
var HappycowServiceWorker=function(){const applicationServerKey='BAsT2B93nAsg-r59-tu0WHKPtKsPb6FoGcsr866F6QE9jZJJ2uRO5TceYsZfpD95yyPIs2RjsvYADmLvLe0kHQk';function register(name,scope){return new Promise(function(resolve,reject){if(!('serviceWorker'in navigator)){return reject();}
navigator.serviceWorker.register(name,{scope:scope}).then(function(swReg){return resolve(swReg);}).catch(function(err){return resolve(null);});});}
function subscribe(){return new Promise(function(resolve,reject){if(!('serviceWorker'in navigator)){return reject();}
if(!('PushManager'in window)){return reject;}
navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:urlBase64ToUint8Array(applicationServerKey),}).then(function(subscription){return resolve(subscription);});}).catch(function(e){return reject(e);});});}
function subscriptionStatus(){return new Promise(function(resolve,reject){if(!('serviceWorker'in navigator)){return reject();}
if(!('PushManager'in window)){return reject();}
navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){serviceWorkerRegistration.pushManager.getSubscription();}).then(function(subscription){return resolve(subscription);}).catch(function(e){return reject(e);});});}
function urlBase64ToUint8Array(base64String){const padding='='.repeat((4-(base64String.length%4))%4);const base64=(base64String+padding).replace(/\-/g,'+').replace(/_/g,'/');const rawData=window.atob(base64);const outputArray=new Uint8Array(rawData.length);for(let i=0;i<rawData.length;++i){outputArray[i]=rawData.charCodeAt(i);}
return outputArray;}
return{register:register,subscriptionStatus:subscriptionStatus,subscribe:subscribe,};};;
window.__gcse={callback:googleCSELoaded,};function googleCSELoaded(){addOnEventListener('click','#customSearch',()=>{const searchText=document.querySelector('#customSearchText').value;const element=google.search.cse.element.getElement('searchOnlyCSE');element.execute(searchText);});};
var HappycowAlert=(function(){let promiseResolve=null;let promiseReject=null;let options={};const modalContentTemplate=`
        <div class="modal modal-alert modal-alert-center block overflow-x-hidden scrolling-touch fixed top-0 w-full h-full flex items-center justify-center
         z-50" tabindex="0" role="dialog" aria-labelledby="success-modal">
            <div class="modal-dialog overflow-hidden m-5 w-full max-w-lg" role="document">
                <div class="modal-content overflow-y-auto relative pt-7 pb-9 px-0 bg-white shadow-none rounded-xl">
                    <button type="button" class="btn close h-7 w-7 absolute left-auto right-0 -mt-4 mr-2 xl:-mt-3 xl:mr-4 xl:h-8 xl:w-8 bg-white text-base-500 flex justify-center items-center border border-gray-300 rounded-full group transition-colors duration-200 ease-in-out hover:text-primary-500" data-dismiss="modal" aria-label="Close">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                    <h2 class="modal-alert-title text-center text-xl md:text-2xl text-primary-500 leading-normal w-3/4 mx-auto px-1 xl:px-0">Ooops...</h2>
                    <div class="modal-alert-message text-center font-normal mt-4 px-6 md:px-8"></div>
                    <ul class="mt-6 modal-btns">
                        <li>
                            <button type="button" class="btn-icon btn-modal-alert btn-modal-cancel w-full p-2 leading-relaxed rounded-lg bg-white border border-gray-200 text-base-500 transition-color duration-200 ease-in-out hover:bg-gray-200">Cancel</button>
                        </li>
                        <li>
                            <button type="button" class="btn-modal-alert btn-modal-ok w-full p-2 leading-relaxed rounded-lg bg-primary-500 border border-primary-500 transition-color duration-200 ease-in-out hover:bg-primary-300 hover:border-primary-300">Ok</button>
                        </li>
                    </ul>
                    <div class="modal-btn-extra px-6 md:px-8 hidden">
                        <div class="my-6 relative flex items-center justify-center h-6">
                            <div class="absolute w-full left-0 h-px bg-gray-200"></div>
                            <div class="absolute text-sm font-bold z-10 bg-white px-5">Or</div>
                        </div>
                        <button type="button" class="btn-modal-alert btn-modal-btn1-extra w-full p-2 leading-relaxed rounded-lg bg-white border border-primary-500 text-primary-500 transition-color duration-200 ease-in-out hover:bg-primary-500 hover:text-white">Extra Button</button>
                    </div>
                </div>
            </div>
        </div>
    `;const loaderTemplate=`
        <div class="p-2 flex justify-center">
            <svg width="40" height="10" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg" fill="#fff">
                <circle cx="15" cy="15" r="15">
                    <animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" />
                    <animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" />
                </circle>
                <circle cx="60" cy="15" r="9" fill-opacity="0.3">
                    <animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" />
                    <animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" />
                </circle>
                <circle cx="105" cy="15" r="15">
                    <animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" />
                    <animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" />
                </circle>
            </svg>
        </div>`;const alertBoxTemplate=(message='',alertClass='')=>`
        <div class="alert-box ${alertClass} p-3 flex items-center rounded-lg shadow-alert" role="alert">
            <span class="alert-box-icon flex-0-0-auto mt-1px">
                <svg class="w-5 h-5 -mt-2px" viewBox="0 0 18 18" stroke="currentColor" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 5V9.8" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 13.0081L9.008 12.9993" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 17C13.4184 17 17 13.4184 17 9C17 4.5816 13.4184 1 9 1C4.5816 1 1 4.5816 1 9C1 13.4184 4.5816 17 9 17Z" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </span>
            <p class="alert-box-text font-normal text-sm rounded-md ml-2 leading-snug">${message}</p>
        </div>
    `;const alertExitTemplate=`
        <div id='modal-alert-exit' class="modal-alert-exit z-70 h-screen w-screen fixed top-0 flex items-center justify-center" role="alert">
            <div class="shadow-alert relative flex flex-col items-center bg-white rounded-lg py-7 px-5 max-w-93 w-full mx-5">
                <button type="button" class="btn-alert-cancel h-7 w-7 absolute left-auto right-0 -mt-3 mr-4 xl:-mt-3 xl:mr-4 xl:h-8 xl:w-8 bg-white text-base-500 flex justify-center items-center border border-gray-300 rounded-full group transition-colors duration-200 ease-in-out">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
                <h5 class="text-center text-primary-500 text-lg">Confirm Exit</h5>
                <p class="text-center font-normal mt-4">Are you sure you want to exit?</p>
                <div class="w-full grid grid-cols-2 gap-3 mt-4">
                    <button type="button" class="btn-alert-cancel text-base-500 transitiona-all duration-200 ease-in-out hover:bg-gray-200 leading-relaxed border border-gray-200 rounded-md w-full py-2">Cancel</button>
                    <button type="button" class="btn-alert-exit bg-primary-500 transitiona-all duration-200 ease-in-out hover:bg-primary-300 leading-relaxed text-white rounded-md w-full py-2">Exit</button>
                </div>
            </div>
        </div>
    `;const adjustmentAlertPositionDebounce=debounce(()=>{adjustmentAlertPosition();},300);window.addEventListener('click',(e)=>{if(e.target.classList.contains('modal-alert')){close(e);}});window.addEventListener('resize',adjustmentAlertPositionDebounce);function adjustmentAlertPosition(){const modalAlert=document.querySelector('.modal-alert.show');if(modalAlert){const modalAlertContent=document.querySelector('.modal-alert.show .modal-content');if(modalAlertContent.getBoundingClientRect().height+60<window.screen.availHeight){modalAlert.classList.add('items-center');modalAlert.classList.remove('items-start');return;}
modalAlert.classList.add('items-start');modalAlert.classList.remove('items-center');}}
function bindBasic(){document.querySelector('.btn-modal-cancel').classList.add('hidden');document.querySelector('.modal-alert .btn-modal-ok').addEventListener('click',close);document.querySelector('.modal-alert .btn.close').addEventListener('click',close);adjustmentAlertPosition();}
function bindAdvanced(){if(options&&(!options.buttons||!options.buttons.hasOwnProperty('cancel'))){const btnCancel=document.querySelector('.btn-modal-cancel');if(btnCancel){btnCancel.parentElement.remove();document.querySelector('.modal-alert .modal-btns').classList.remove('modal-btns-advanced');}}
adjustmentAlertPosition();document.querySelector('.modal-alert .btn.close').addEventListener('click',close);const btnOk=document.querySelector('.modal-alert .btn-modal-ok');if(btnOk)btnOk.addEventListener('click',close);const btnCancel=document.querySelector('.modal-alert .btn-modal-cancel');if(btnCancel)btnCancel.addEventListener('click',close);if(!options.buttons){return;}
if(options.extra){document.querySelector('.modal-alert .btn-modal-btn1-extra').addEventListener('click',close);}}
function loading(){document.querySelector('.modal-alert .btn-modal-ok').innerHTML=loaderTemplate;}
function terminate(){HappycowModal.delete('.modal-alert');if(promiseResolve){promiseResolve(0);clean();}}
function close(e=null){let btnOk=document.querySelector('.modal-alert .btn-modal-ok');if(btnOk){btnOk.removeEventListener('click',close);btnOk=null;}
if(e&&e.target.classList.contains('modal-alert')){if(document.querySelector('.modal-alert.show .btn.close').classList.contains('close-confirm')){alertExit();return;}
HappycowModal.delete('.modal-alert');if(promiseResolve){promiseResolve(0);clean();}
return;}
if(e&&e.currentTarget.classList.contains('close')){let btnClose=document.querySelector('.modal-alert .btn.close');if(btnClose.classList.contains('close-confirm')){alertExit();return;}
btnClose.removeEventListener('click',close);btnClose=null;HappycowModal.delete('.modal-alert');if(promiseResolve){promiseResolve(0);clean();}
return;}
if(e&&e.currentTarget.classList.contains('btn-modal-btn1-extra')){let btnExtra=document.querySelector('.modal-alert .btn-modal-btn1-extra');btnExtra.removeEventListener('click',close);btnExtra=null;if(options.extraCloseModal){HappycowModal.delete('.modal-alert');}
if(promiseResolve){promiseResolve(options.extraValue||0);clean();}
return;}
if(e&&e.currentTarget.classList.contains('btn-modal-cancel')){let btnCancel=document.querySelector('.modal-alert .btn-modal-cancel');btnCancel.removeEventListener('click',close);btnCancel=null;HappycowModal.delete('.modal-alert');if(promiseResolve){promiseResolve(0);clean();}
return;}
if(options.confirmCloseModal||options.confirmCloseModal===undefined){HappycowModal.delete('.modal-alert');if(promiseResolve){promiseResolve(options.confirmValue||0);clean();}
return;}
if(promiseResolve){promiseResolve(options.confirmValue||0);clean();}}
function clean(){promiseResolve=null;promiseReject=null;}
function setAdvancedModal(modalContentEl){options.confirmCloseModal=true;options.confirmValue=true;options.cancelValue=false;options.extraValue=false;options.extraCloseModal=false;options.extra=false;if(options.hasOwnProperty('buttons')){if(!options.buttons&&typeof options.buttons==='boolean'){modalContentEl.querySelector('.modal-btns').remove();}
if(options.buttons.hasOwnProperty('cancel')){if(!options.buttons.cancel&&typeof options.buttons.cancel==='boolean'){modalContentEl.querySelector('.btn-modal-cancel').parentElement.remove();}
if(typeof options.buttons.cancel==='object'){if(options.buttons.cancel.hasOwnProperty('text')){modalContentEl.querySelector('.btn-modal-cancel').textContent=options.buttons.cancel.text;}
if(options.buttons.cancel.hasOwnProperty('visible')){if(!options.buttons.cancel.visible){modalContentEl.querySelector('.btn-modal-cancel').classList.add('hidden');}}
if(options.buttons.cancel.hasOwnProperty('value')){options.cancelValue=options.buttons.cancel.value;}}}
if(options.buttons.hasOwnProperty('confirm')){if(options.buttons.confirm.hasOwnProperty('text')){modalContentEl.querySelector('.btn-modal-ok').textContent=options.buttons.confirm.text;}
if(options.buttons.confirm.hasOwnProperty('closeModal')){options.confirmCloseModal=options.buttons.confirm.closeModal;}
if(options.buttons.confirm.hasOwnProperty('value')){options.confirmValue=options.buttons.confirm.value;}}
if(options.buttons.hasOwnProperty('extra')){if(!options.buttons.extra&&typeof options.buttons.extra==='boolean'){modalContentEl.querySelector('.modal-btn-extra').remove();}
options.extra=true;modalContentEl.querySelector('.btn-modal-btn1-extra').parentElement.classList.remove('hidden');if(options.buttons.extra.hasOwnProperty('text')){modalContentEl.querySelector('.btn-modal-btn1-extra').textContent=options.buttons.extra.text;}
if(options.buttons.extra.hasOwnProperty('closeModal')){options.extraCloseModal=options.buttons.extra.closeModal;}
if(options.buttons.extra.hasOwnProperty('value')){options.extraValue=options.buttons.extra.value;}
if(options.buttons.extra.hasOwnProperty('color')){modalContentEl.querySelector('.btn-modal-btn1-extra').style.backgroundColor=options.buttons.extra.color;}}else{modalContentEl.querySelector('.modal-btn-extra').remove();}
if(options.buttons.hasOwnProperty('customCss')){options.buttons.customCss.forEach((item)=>{modalContentEl.querySelector('.modal-btns').classList.add(item);});}
if(modalContentEl.querySelectorAll('.modal-btns li').length===1&&!options.buttons.hasOwnProperty('fullWidth')&&!options.buttons.hasOwnProperty('customCss')){modalContentEl.querySelector('.modal-btns').classList.add('modal-btns-single');}
if(modalContentEl.querySelectorAll('.modal-btns li').length===2&&!options.buttons.hasOwnProperty('fullWidth')&&!options.buttons.hasOwnProperty('customCss')){modalContentEl.querySelector('.modal-btns').classList.add('modal-btns-advanced');}
if(options.buttons.hasOwnProperty('fullWidth')&&!options.buttons.hasOwnProperty('customCss')){modalContentEl.querySelector('.modal-btns').classList.add('modal-btns-full');}}
if(options.hasOwnProperty('modalSmall')&&typeof options.modalSmall==='boolean'){modalContentEl.querySelector('.modal-dialog').classList.add('modal-dialog-small');}
if(options.hasOwnProperty('modalLarge')&&typeof options.modalLarge==='boolean'){modalContentEl.querySelector('.modal-dialog').classList.add('modal-dialog-large');}
if(options.hasOwnProperty('confirmExit')&&typeof options.confirmExit==='boolean'){modalContentEl.querySelector('.btn.close').classList.add('close-confirm');}
modalContentEl.querySelector('.modal-alert-title').innerHTML=options.title;modalContentEl.querySelector('.modal-alert-message').innerHTML=options.message;if(!options.title||options.title.length==0){modalContentEl.querySelector('.modal-alert-title').remove();}
if(!options.message||options.message.length==0){modalContentEl.querySelector('.modal-alert-message').remove();}
document.querySelector('#full-site-content').appendChild(modalContentEl);HappycowModal.show('.modal-alert');bindAdvanced();}
function setBasicModal(title,message,modalContent){modalContent.querySelector('.modal-alert-title').textContent=title;modalContent.querySelector('.modal-alert-message').textContent=message;document.querySelector('#full-site-content').appendChild(modalContent);HappycowModal.closeOpened();HappycowModal.show('.modal-alert');bindBasic();}
function success(title,message){return new Promise(function(resolve,reject){clean();options={};close();promiseResolve=resolve;promiseReject=reject;const modalContentEl=htmlToElement(modalContentTemplate);setBasicModal(title,message,modalContentEl);});}
function info(title,message){return new Promise(function(resolve,reject){clean();options={};close();promiseResolve=resolve;promiseReject=reject;const modalContentEl=htmlToElement(modalContentTemplate);setBasicModal(title,message,modalContentEl);});}
function error(title,message){return new Promise(function(resolve,reject){clean();options={};close();promiseResolve=resolve;promiseReject=reject;const modalContentEl=htmlToElement(modalContentTemplate);setBasicModal(title,message,modalContentEl);});}
function alert(opts){return new Promise(function(resolve,reject){clean();options={};close();promiseResolve=resolve;promiseReject=reject;options=opts;const modalContentEl=htmlToElement(modalContentTemplate);setAdvancedModal(modalContentEl);});}
function alertBox(target=null,message='',alertClass=''){if(!target)return;if(document.querySelector(`${target} .alert-box`)){document.querySelector(`${target} .alert-box`).remove();}
prependContent(target,alertBoxTemplate(message,alertClass));}
function deleteAlertBox(target){if(document.querySelector(`${target} .alert-box`)){document.querySelector(`${target} .alert-box`).remove();}}
function alertExit(defaultEvents=true){document.body.insertAdjacentHTML('beforeend',alertExitTemplate);deleteElement('.modal-backdrop');appendContent('body',"<div id='modal-alert-exit-overlay' class='modal-backdrop-exit fixed inset-0 bg-black opacity-30 z-60'></div>");if(defaultEvents){addLiveEventListener('click','#modal-alert-exit .btn-alert-cancel',()=>{deleteAlertExit();appendContent('body',"<div class='modal-backdrop in fixed inset-0 bg-black opacity-30 z-40'></div>");});addLiveEventListener('click','#modal-alert-exit .btn-alert-exit',()=>{deleteAlertExit();terminate();});}}
function deleteAlertExit(){deleteElement('#modal-alert-exit-overlay');deleteElement('#modal-alert-exit');}
return{error:error,info:info,success:success,alert:alert,close:close,loading:loading,terminate:terminate,alertBox:alertBox,deleteAlertBox:deleteAlertBox,alertExit:alertExit,deleteAlertExit:deleteAlertExit,};})();;
var HappycowShare=(function(){let url=null;const shareTemplate=`
        <svg class="h-5 w-5 md:h-6 md:w-6 text-primary-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
        </svg>
        <span>
            URL Copied
        </span>
    `;function init(page=null){const shareButton=document.querySelector('.share-button');url=page;if(shareButton){url=page||shareButton.dataset.url;}
addLiveEventListener('click','.share-button',function(e){e.preventDefault();result=getTemplate(encodeURIComponent(url||window.location.href));HappycowAlert.alert({title:'Share This',message:result,buttons:false,});});addLiveEventListener('click','.clipboard',function(e){e.preventDefault();copyTextToClipboard(decodeURIComponent(this.dataset.url||window.location.href));});}
function getTemplate(page){let mobileOnly='';if(window.innerWidth<768){mobileOnly=`
                <div>
                    <a href="fb-messenger://share/?link=${page}" target="_blank">
                        <img src="/img/social/messenger.svg" alt="send to messenger">
                    </a>
                </div>
            `;}
return`
            <p class="text-gray-800 text-base font-normal my-2">Share this page with your family and friends</p>
            <div class="grid grid-cols-2 gap-4 mt-6">
                <div>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=${page}" class="w-full rounded-lg py-2.5 px-2 bg-facebook flex items-center justify-center text-white" target="_blank">
                        <svg class="w-5 h-5 mr-2 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 26" stroke="currentColor">
                            <path fill="currentColor" stroke="1" fill-rule="evenodd" d="M13.393 1.005L10.31 1C6.844 1 4.605 3.297 4.605 6.853v2.699H1.504a.485.485 0 00-.485.485v3.91c0 .268.217.485.485.485h3.1v9.866c0 .268.218.485.486.485h4.046a.485.485 0 00.485-.485v-9.866h3.625a.485.485 0 00.485-.485l.002-3.91a.486.486 0 00-.485-.485H9.62V7.264c0-1.1.262-1.658 1.694-1.658h2.078a.485.485 0 00.484-.485V1.49a.485.485 0 00-.484-.485z" />
                        </svg>
                        Facebook
                    </a>
                </div>
                <div>
                    <a href="https://twitter.com/home?status=${page}" target="_blank" class="w-full rounded-lg py-2.5 px-2 bg-twitter justify-center text-white flex items-center">
                        <svg class="w-5 h-5 mr-2 text-white" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 450.619 450.619">
                            <path fill="currentColor" d="M449.224,92.392c1.726-2.087,1.864-5.063,0.342-7.302c-1.523-2.24-4.344-3.209-6.918-2.37
                                c-11.951,3.896-24.395,6.665-37.236,8.224c15.313-9.264,27.946-22.594,36.381-38.515c1.234-2.329,0.829-5.188-1.003-7.082
                                c-1.832-1.895-4.675-2.394-7.045-1.241c-14.897,7.249-30.829,12.684-47.529,15.999c-17.954-19.28-43.509-31.329-71.808-31.329
                                c-54.311,0-98.367,44.422-98.367,99.225c0,7.763,0.873,15.33,2.563,22.609c-74.352-3.771-141.058-36.795-189.015-87.905
                                c-3.315-3.534-8.265-5.028-12.981-3.921c-4.717,1.107-8.49,4.646-9.883,9.288c-2.729,9.101-4.201,18.755-4.201,28.749
                                c0,34.445,15.236,64.809,41.625,82.602c-7.125-0.23-17.07-2.438-25.951-4.827c-4.954-1.333-10.244,0.066-13.889,3.678
                                c-3.644,3.611-5.082,8.884-3.799,13.851c9.564,37.023,40.707,65.873,78.008,73.432c-8.277,2.275-15.883,3.482-24.86,3.482
                                c-0.003,0-0.006,0-0.009,0c-4.022,0-7.743,2.137-9.768,5.612c-2.025,3.476-2.044,7.761-0.063,11.262
                                c16.696,29.52,48.12,49.6,84.018,50.282c-33.668,26.599-75.961,42.45-122.029,42.45c-0.028,0-0.057,0-0.085,0
                                c-2.626-0.001-4.915,1.787-5.55,4.335c-0.635,2.549,0.549,5.2,2.868,6.433c38.881,20.67,83.181,32.432,130.182,32.432
                                c180.923,0,279.884-151.216,279.884-282.331c0-4.318-0.094-8.565-0.281-12.836C426.318,116.836,438.567,105.29,449.224,92.392z" />
                        </svg>
                        Twitter
                    </a>
                </div>
            </div>
            <div class="my-6 relative flex items-center justify-center h-6">
                <div class="absolute w-full left-0 h-px bg-gray-200"></div>
                <div class="absolute text-sm font-bold z-8 bg-white px-5">Or</div>
            </div>
            <div>
                <a role="button" class="btn-media clipboard max-w-59 w-full mx-auto rounded-lg border border-gray-200 py-2 px-3 flex items-center justify-center cursor-pointer text-base-500 font-normal transition-all duration-200 ease-in-out hover:bg-gray-200" data-url=${page}>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                    </svg>
                    Copy Link
                </a>
            </div>
        `;}
function fallbackCopyTextToClipboard(text){const textArea=document.createElement('textarea');textArea.value=text;document.body.appendChild(textArea);textArea.focus();textArea.select();try{const successful=document.execCommand('copy');const msg=successful?HappycowToastr.basic('',shareTemplate):window.prompt('Copy to clipboard: Ctrl+C, Enter',text);}catch(err){window.prompt('Copy to clipboard: Ctrl+C, Enter',text);}
document.body.removeChild(textArea);}
function copyTextToClipboard(text){if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return;}
navigator.clipboard.writeText(text).then(function(){HappycowToastr.basic('',shareTemplate);HappycowAlert.terminate();},function(err){window.prompt('Copy to clipboard: Ctrl+C, Enter',text);});}
return{init:init,template:getTemplate,};})();;
var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var rendered=false;var HappycowAds=(function(){function loadAdsense(){const gads=document.createElement('script');gads.async=true;gads.type='text/javascript';const useSSL=document.location.protocol=='https:';gads.src=(useSSL?'https:':'http:')+'//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js';gads.rel='preconnect';gads.defer=true;gads.async=true;const node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gads,node);(adsbygoogle=window.adsbygoogle||[]).push({});}
function loadGoogleTags(){const adPlacements=document.querySelectorAll('.hc-google-placement');if(adPlacements.length>0){loadJs('//www.googletagservices.com/tag/js/gpt.js').then(function(){adPlacements.forEach(function(item){const id=item.getAttribute('id');const name=item.dataset.gptName;let sizes=item.dataset.gptSizes;googletag.cmd.push(function(){sizes=JSON.parse(sizes);const slot=googletag.defineSlot(`/1066711/${name}`,sizes,id);if(slot){slot.addService(googletag.pubads());}
Array.from(item.children).forEach(function(child){const key=child.dataset.gptAttributeKey;const value=child.dataset.gptAttributeValue;googletag.pubads().setTargeting(key,[value]);});googletag.pubads().collapseEmptyDivs();googletag.pubads().enableLazyLoad({fetchMarginPercent:500,renderMarginPercent:200,mobileScaling:2.0,});googletag.pubads().enableSingleRequest();googletag.enableServices();googletag.display(id);googletag.pubads().addEventListener('slotRenderEnded',function(event){rendered=true;});});});});}}
function adBlockNotDetected(){const blockDetected=document.querySelector('.dfp-block-detected');if(blockDetected)blockDetected.classList.add('hidden');}
function adBlockDetected(){if(rendered===true){if(document.querySelector('.hc-google-placement').style.height!==0)return;}
const blockDetected=document.querySelector('.dfp-block-detected');if(blockDetected)blockDetected.classList.remove('hidden');const ads=document.querySelector('.sidebar-default .ads');if(ads){emptyElement(ads);ads.style.height='30px';}}
function adBlock(){blockAdBlock.setOption({debug:false,checkOnLoad:true,resetOnEnd:false,});if(typeof blockAdBlock==='undefined'){adBlockDetected();return;}
blockAdBlock.onDetected(adBlockDetected);blockAdBlock.onNotDetected(adBlockNotDetected);}
return{loadAdsense:loadAdsense,loadGoogleTags:loadGoogleTags,adblock:adBlock,};})();;
var HappycowSocial=(function(){function loadTwitter(){window.twttr=(function(d,s,id){const fjs=d.getElementsByTagName(s)[0];const t=window.twttr||{};let js=null;if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;})(document,'script','twitter-wjs');}
function loadFacebook(){const script=document.querySelector('#facebook-jssdk');if(!script){(function(d,s,id){const fjs=d.getElementsByTagName(s)[0];let js=null;if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src='//connect.facebook.net/en_US/sdk.js';js.onload=function(){facebookCallback();};fjs.parentNode.insertBefore(js,fjs);})(document,'script','facebook-jssdk');}}
function loadGoogleSearch(){const cx='017672370478381545993:zci062ltv6i';const gcse=document.createElement('script');gcse.type='text/javascript';gcse.async=true;gcse.rel='preconnect';gcse.src=`${document.location.protocol == 'https:' ? 'https:' : 'http:'}//cse.google.com/cse.js?cx=${cx}`;const s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse,s);}
function facebookCallback(){window.fbAsyncInit=function(){FB.init({appId:document.querySelector('div#params').dataset.fbAppid,cookie:true,xfbml:true,version:'v8.0',});};}
function loadYoutube(){const v=document.getElementsByClassName('youtube-player');for(let n=0;n<v.length;n++){const p=document.createElement('div');p.innerHTML=youtubeThumb(v[n].getAttribute('data-id'));p.onclick=youtubeFrame;v[n].appendChild(p);}}
function youtubeThumb(id){return`<img class="youtube-thumb block m-auto w-full absolute h-50 object-cover inset-0 p-0 rounded-lg" src="//i.ytimg.com/vi/${id}/mqdefault.jpg" alt="HappyCow YouTube video"><div class="play-button absolute w-20 h-12 rounded-md text-center bg-red-500 flex items-center justify-center" aria-hidden="true"><svg class="text-white w-8 h-8" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="currentColor"><path d="M18.6291 9.8755L8.78625 4.43312C6.74037 3.30191 4 4.51829 4 6.55762V17.4424C4 19.4817 6.74037 20.6981 8.78625 19.5669L18.6291 14.1245C20.457 13.1138 20.457 10.8862 18.6291 9.8755Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>`;}
function youtubeFrame(){const overlay=document.querySelector('.video-overlay');if(overlay)overlay.remove();const iframe=document.createElement('iframe');iframe.setAttribute('src',`//www.youtube.com/embed/${this.parentNode.getAttribute('data-id')}?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0`);iframe.setAttribute('frameborder','0');iframe.setAttribute('class','absolute border-0 inset-0 w-full h-full');iframe.setAttribute('allowfullscreen','');iframe.setAttribute('id','youtube-iframe');this.parentNode.replaceChild(iframe,this);}
return{initTwitter:loadTwitter,loadFacebook:loadFacebook,initAsyncFacebook:facebookCallback,loadGoogleSearch:loadGoogleSearch,loadYoutube:loadYoutube,};})();;
var HappycowEventsCommon=(function(){let isShowingMobile=false;let controller=null;const config=document.getElementById('config');const canShowMobile=parseInt(config.dataset.mobile,10);const canShowSupport=parseInt(config.dataset.support,10);const canShowLoginOrRegister=config.dataset.login==true;const searchOverlay=document.querySelector('.search-overlay');const searchOverlayState={containerOffsetTop:0,};const searchOverlayDebounce=debounce(()=>{setOverlayContainerHeight();},200);function init(){window.addEventListener('resize',searchOverlayDebounce);addLiveEventListener('click','.close-ad, .get-mobile #go-to-full-site-content',function(e){HappycowModal.close('#modal-mobile-ad');e.preventDefault();});addLiveEventListener('shown.hc.modal','#modal-mobile-ad',function(){const link=document.createElement('link');link.rel='stylesheet';link.href='https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,600;1,600&display=swap';document.getElementsByTagName('head')[0].appendChild(link);});addLiveEventListener('click','#modal-mobile-ad .modal-content',function(e){if(e.target.classList.contains('close-ad')){return;}
HappycowAnalytics.event(1);HappycowModal.close('#modal-mobile-ad');});addLiveEventListener('click','.got-it',function(e){e.preventDefault();document.querySelector('.notification').remove();HappycowCookies.setCookie('happycow-cookie-policy','accept',{expires:365,path:'/'});});addLiveEventListener('click','.btn-footer-toggler',function(e){e.preventDefault();const footer=document.querySelector('.footer');if(footer.classList.contains('xl:hidden')){footer.classList.toggle('xl:hidden');return;}
footer.classList.toggle('md:hidden');});addLiveEventListener('click','.btn-search-overlay',function(e){e.preventDefault();});addLiveEventListener('click','.btn-toggle-search',function(e){e.stopPropagation();document.body.classList.toggle('search-overlay-open');searchOverlay.classList.toggle('hidden');if(searchOverlay.classList.contains('hidden')){toggleBodyScroll();return;}
searchOverlayState.containerOffsetTop=searchOverlay.querySelector('.search-overlay-results-container').offsetTop;document.querySelectorAll('.navbar-notifications .dropdown').forEach((dropdown)=>{if(dropdown.classList.contains('open')){dropdown.classList.remove('open');}});setOverlayContainerHeight();toggleBodyScroll();});addLiveEventListener('input','.query-search-input.input-control',function(e){const searchType=this.closest('.tab-pane').getAttribute('id');const queryValue=this.value;const self=this;document.querySelectorAll('.query-search-input').forEach((item)=>{item.value=queryValue;});setTimeout(function(){overlaySearch(searchType,queryValue);},200);});addLiveEventListener('shown.hc.tab','.search-overlay .nav-link',function(){const href=this.getAttribute('href');const tabPane=document.querySelector('.tab-pane'+href);if(!tabPane)return;const searchType=tabPane.getAttribute('id');const queryValue=tabPane.querySelector('.query-search-input.input-control').value;const searchResults=tabPane.querySelector('.search-overlay-results');if(searchResults.dataset.lastQuery!=queryValue){overlaySearch(searchType,queryValue);}});pubSub.subscribe('userData',function(data){setTimeout(function(){if(!data.hasApp){loadMobile();}
if(!isShowingMobile){if(!data.username){const status=roadblock();if(status)return;}}
const cookiePolicy=HappycowCookies.getCookie('happycow-cookie-policy');if(!cookiePolicy){cookieNotification();}},500);});}
function setOverlayContainerHeight(){if(document.body.classList.contains('search-overlay-open')){document.body.style.setProperty('--search-overlay-height',`${window.innerHeight - searchOverlayState.containerOffsetTop}px`);}}
function detectMobile(){if(navigator.userAgent.match(/Googlebot|Bingbot/i)||navigator.userAgent.match(/Bingbot/i)||navigator.userAgent.match(/Rogerbot/i)||navigator.userAgent.match(/Google Page Speed Insights/i)||navigator.userAgent.match(/Google/i)||navigator.userAgent.match(/Chrome-Lighthouse/i)||navigator.userAgent.match(/Lighthouse/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){return true;}
return false;}
function mobileAd(mobileAdView,listingAd){const os=getMobileOperatingSystem();if(document.querySelector('#web-listing')){get(`/ajax/views/mobile?type=${os}&listing=true`,{target:false}).then(function(result){requestAnimationFrame(()=>{appendContent('body',result.data);requestIdleCallback(()=>{HappycowModal.show('#modal-mobile-ad');const getMobile=document.querySelector('.get-mobile');if(getMobile){const type=getMobile.dataset.type;HappycowAnalytics.event(0,{view:mobileAdView});}});});});return;}
get(`/ajax/views/mobile?type=${os}`,{target:false}).then(function(result){requestAnimationFrame(()=>{appendContent('body',result.data);requestIdleCallback(()=>{HappycowModal.show('#modal-mobile-ad');const getMobile=document.querySelector('.get-mobile');if(getMobile){const type=getMobile.dataset.type;HappycowAnalytics.event(0,{view:mobileAdView});}});});});}
function cookieNotification(){get('/ajax/views/cookie',{target:false,importance:'low'}).then(function(result){if(result.data){appendContent('body',result.data);}});}
function roadblock(){const matches=window.location.hash.match(/i=([^&]*)/);const hasMatch=matches?matches[1]:null;const isListing=document.querySelectorAll('#web-listing,#web-listingImages');const canShow=hasMatch&&isListing.length>0;let hcSupportView=HappycowCookies.getCookie('hc-support-view');hcSupportView=Number.isNaN(Number(hcSupportView))?0:hcSupportView;hcSupportView++;HappycowCookies.setCookie('hc-support-view',hcSupportView,{expires:1,path:'/'});if(hcSupportView>12&&!canShow&&canShowLoginOrRegister&&!HappycowModal.isOpened()){clickObserver.initialize();HappycowModal.show('#authentication-modal','',false);HappycowAnalytics.event(4,{view:hcSupportView});HappycowAnalytics.gtagEventCheck('#web-listing','auth_modal',{source:'listing_details',trigger:'session_pageview_limit',});HappycowAnalytics.gtagEventCheck('#web-home','auth_modal',{source:'home',trigger:'session_pageview_limit',});return true;}
return false;}
function getMobileOperatingSystem(){const userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream){return'iOS';}
return'Android';}
function getUserDevice(){const userAgent=navigator.userAgent||navigator.vendor||window.opera;let device='Desktop';if(/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream){device='iOS';return device;}
if(/Android/.test(userAgent)){device='Android';return device;}
return device;}
function loadMobile(){const matches=window.location.hash.match(/i=([^&]*)/);const hasMatch=matches?matches[1]:false;const canShow=!hasMatch;const isMobile=detectMobile();let mobileAdView=HappycowCookies.getCookie('hc-mobile-ad-view');if(Number.isNaN(Number(mobileAdView))){mobileAdView=0;}
if(isMobile&&canShowMobile&&canShow){switch(parseInt(mobileAdView,10)){case 0:setTimeout(function(){mobileAd(mobileAdView);},500);isShowingMobile=true;break;default:break;}
mobileAdView=parseInt(mobileAdView,10)+1;HappycowCookies.setCookie('hc-mobile-ad-view',mobileAdView,{expires:1,path:'/'});}}
function overlaySearch(type,term){if(controller)controller.abort();controller=new AbortController();const signal=controller.signal;const urlParams=new URLSearchParams();urlParams.set('term',term);const searchOverlayResults=document.querySelector(`#${type} .search-overlay-results`);setLoading(type,searchOverlayResults);get(`/ajax/views/search/${type}/?${urlParams.toString()}`,{target:false,signal:signal}).then(function(result){if(!result.data){document.querySelector(`#${type} .search-overlay-results`).classList.add('hidden');return;}
requestAnimationFrame(()=>{emptyElement(`#${type} .search-overlay-results`);appendContent(`#${type} .search-overlay-results`,result.data);searchOverlayResults.dataset.lastQuery=term;});}).catch(function(err){if(err.name!=='AbortError'){HappycowToastr.error('Something went wrong! Please try again.');}});}
function setLoading(type,searchOverlayResults){requestAnimationFrame(()=>{searchOverlayResults.classList.remove('hidden');emptyElement(`#${type} .search-overlay-results`);appendContent(`#${type} .search-overlay-results`,'<li>Searching...</li>');});}
return{init:init,getUserDevice:getUserDevice,detectMobile:detectMobile,getMobileOperatingSystem:getMobileOperatingSystem,};})();;
(function(window){var BlockAdBlock=function(options){this._options={checkOnLoad:false,resetOnEnd:false,loopCheckTime:50,loopMaxNumber:5,baitClass:'pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links',baitStyle:'width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;',debug:false};this._var={version:'3.2.1',bait:null,checking:false,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}};if(options!==undefined){this.setOption(options);}
var self=this;var eventCallback=function(){setTimeout(function(){if(self._options.checkOnLoad===true){if(self._options.debug===true){self._log('onload->eventCallback','A check loading is launched');}
if(self._var.bait===null){self._creatBait();}
setTimeout(function(){self.check();},1);}},1);};if(window.addEventListener!==undefined){window.addEventListener('load',eventCallback,false);}else{window.attachEvent('onload',eventCallback);}};BlockAdBlock.prototype._options=null;BlockAdBlock.prototype._var=null;BlockAdBlock.prototype._bait=null;BlockAdBlock.prototype._log=function(method,message){console.log('[BlockAdBlock]['+method+'] '+message);};BlockAdBlock.prototype.setOption=function(options,value){if(value!==undefined){var key=options;options={};options[key]=value;}
for(var option in options){this._options[option]=options[option];if(this._options.debug===true){this._log('setOption','The option "'+option+'" he was assigned to "'+options[option]+'"');}}
return this;};BlockAdBlock.prototype._creatBait=function(){var bait=document.createElement('div');bait.setAttribute('class',this._options.baitClass);bait.setAttribute('style',this._options.baitStyle);this._var.bait=window.document.body.appendChild(bait);this._var.bait.offsetParent;this._var.bait.offsetHeight;this._var.bait.offsetLeft;this._var.bait.offsetTop;this._var.bait.offsetWidth;this._var.bait.clientHeight;this._var.bait.clientWidth;if(this._options.debug===true){this._log('_creatBait','Bait has been created');}};BlockAdBlock.prototype._destroyBait=function(){window.document.body.removeChild(this._var.bait);this._var.bait=null;if(this._options.debug===true){this._log('_destroyBait','Bait has been removed');}};BlockAdBlock.prototype.check=function(loop){if(loop===undefined){loop=true;}
if(this._options.debug===true){this._log('check','An audit was requested '+(loop===true?'with a':'without')+' loop');}
if(this._var.checking===true){if(this._options.debug===true){this._log('check','A check was canceled because there is already an ongoing');}
return false;}
this._var.checking=true;if(this._var.bait===null){this._creatBait();}
var self=this;this._var.loopNumber=0;if(loop===true){this._var.loop=setInterval(function(){self._checkBait(loop);},this._options.loopCheckTime);}
setTimeout(function(){self._checkBait(loop);},1);if(this._options.debug===true){this._log('check','A check is in progress ...');}
return true;};BlockAdBlock.prototype._checkBait=function(loop){var detected=false;if(this._var.bait===null){this._creatBait();}
if(window.document.body.getAttribute('abp')!==null||this._var.bait.offsetParent===null||this._var.bait.offsetHeight==0||this._var.bait.offsetLeft==0||this._var.bait.offsetTop==0||this._var.bait.offsetWidth==0||this._var.bait.clientHeight==0||this._var.bait.clientWidth==0){detected=true;}
if(window.getComputedStyle!==undefined){var baitTemp=window.getComputedStyle(this._var.bait,null);if(baitTemp&&(baitTemp.getPropertyValue('display')=='none'||baitTemp.getPropertyValue('visibility')=='hidden')){detected=true;}}
if(this._options.debug===true){this._log('_checkBait','A check ('+(this._var.loopNumber+1)+'/'+this._options.loopMaxNumber+' ~'+(1+this._var.loopNumber*this._options.loopCheckTime)+'ms) was conducted and detection is '+(detected===true?'positive':'negative'));}
if(loop===true){this._var.loopNumber++;if(this._var.loopNumber>=this._options.loopMaxNumber){this._stopLoop();}}
if(detected===true){this._stopLoop();this._destroyBait();this.emitEvent(true);if(loop===true){this._var.checking=false;}}else if(this._var.loop===null||loop===false){this._destroyBait();this.emitEvent(false);if(loop===true){this._var.checking=false;}}};BlockAdBlock.prototype._stopLoop=function(detected){clearInterval(this._var.loop);this._var.loop=null;this._var.loopNumber=0;if(this._options.debug===true){this._log('_stopLoop','A loop has been stopped');}};BlockAdBlock.prototype.emitEvent=function(detected){if(this._options.debug===true){this._log('emitEvent','An event with a '+(detected===true?'positive':'negative')+' detection was called');}
var fns=this._var.event[(detected===true?'detected':'notDetected')];for(var i in fns){if(this._options.debug===true){this._log('emitEvent','Call function '+(parseInt(i)+1)+'/'+fns.length);}
if(fns.hasOwnProperty(i)){fns[i]();}}
if(this._options.resetOnEnd===true){this.clearEvent();}
return this;};BlockAdBlock.prototype.clearEvent=function(){this._var.event.detected=[];this._var.event.notDetected=[];if(this._options.debug===true){this._log('clearEvent','The event list has been cleared');}};BlockAdBlock.prototype.on=function(detected,fn){this._var.event[(detected===true?'detected':'notDetected')].push(fn);if(this._options.debug===true){this._log('on','A type of event "'+(detected===true?'detected':'notDetected')+'" was added');}
return this;};BlockAdBlock.prototype.onDetected=function(fn){return this.on(true,fn);};BlockAdBlock.prototype.onNotDetected=function(fn){return this.on(false,fn);};window.BlockAdBlock=BlockAdBlock;if(window.blockAdBlock===undefined){window.blockAdBlock=new BlockAdBlock({checkOnLoad:true,resetOnEnd:true});}})(window);;
(function(root,factory){if(typeof module==="object"&&module.exports){module.exports=factory();}else{root.Toastify=factory();}})(this,function(global){var Toastify=function(options){return new Toastify.lib.init(options);},version="1.11.2";Toastify.defaults={oldestFirst:true,text:"Toastify is awesome!",node:undefined,duration:3000,selector:undefined,callback:function(){},destination:undefined,newWindow:false,close:false,gravity:"toastify-top",positionLeft:false,position:'',backgroundColor:'',avatar:"",className:"",stopOnFocus:true,onClick:function(){},offset:{x:0,y:0},escapeMarkup:true,style:{background:''}};Toastify.lib=Toastify.prototype={toastify:version,constructor:Toastify,init:function(options){if(!options){options={};}
this.options={};this.toastElement=null;this.options.text=options.text||Toastify.defaults.text;this.options.node=options.node||Toastify.defaults.node;this.options.duration=options.duration===0?0:options.duration||Toastify.defaults.duration;this.options.selector=options.selector||Toastify.defaults.selector;this.options.callback=options.callback||Toastify.defaults.callback;this.options.destination=options.destination||Toastify.defaults.destination;this.options.newWindow=options.newWindow||Toastify.defaults.newWindow;this.options.close=options.close||Toastify.defaults.close;this.options.gravity=options.gravity==="bottom"?"toastify-bottom":Toastify.defaults.gravity;this.options.positionLeft=options.positionLeft||Toastify.defaults.positionLeft;this.options.position=options.position||Toastify.defaults.position;this.options.backgroundColor=options.backgroundColor||Toastify.defaults.backgroundColor;this.options.avatar=options.avatar||Toastify.defaults.avatar;this.options.className=options.className||Toastify.defaults.className;this.options.stopOnFocus=options.stopOnFocus===undefined?Toastify.defaults.stopOnFocus:options.stopOnFocus;this.options.onClick=options.onClick||Toastify.defaults.onClick;this.options.offset=options.offset||Toastify.defaults.offset;this.options.escapeMarkup=options.escapeMarkup!==undefined?options.escapeMarkup:Toastify.defaults.escapeMarkup;this.options.style=options.style||Toastify.defaults.style;if(options.backgroundColor){this.options.style.background=options.backgroundColor;}
return this;},buildToast:function(){if(!this.options){throw"Toastify is not initialized";}
var divElement=document.createElement("div");divElement.className="toastify on "+this.options.className;if(!!this.options.position){divElement.className+=" toastify-"+this.options.position;}else{if(this.options.positionLeft===true){divElement.className+=" toastify-left";console.warn('Property `positionLeft` will be depreciated in further versions. Please use `position` instead.')}else{divElement.className+=" toastify-right";}}
divElement.className+=" "+this.options.gravity;if(this.options.backgroundColor){console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');}
for(var property in this.options.style){divElement.style[property]=this.options.style[property];}
if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE){divElement.appendChild(this.options.node)}else{if(this.options.escapeMarkup){divElement.innerText=this.options.text;}else{divElement.innerHTML=this.options.text;}
if(this.options.avatar!==""){var avatarElement=document.createElement("img");avatarElement.src=this.options.avatar;avatarElement.className="toastify-avatar";if(this.options.position=="left"||this.options.positionLeft===true){divElement.appendChild(avatarElement);}else{divElement.insertAdjacentElement("afterbegin",avatarElement);}}}
if(this.options.close===true){var closeElement=document.createElement("span");closeElement.innerHTML="&#10006;";closeElement.className="toast-close";closeElement.addEventListener("click",function(event){event.stopPropagation();this.removeElement(this.toastElement);window.clearTimeout(this.toastElement.timeOutValue);}.bind(this));var width=window.innerWidth>0?window.innerWidth:screen.width;if((this.options.position=="left"||this.options.positionLeft===true)&&width>360){divElement.insertAdjacentElement("afterbegin",closeElement);}else{divElement.appendChild(closeElement);}}
if(this.options.stopOnFocus&&this.options.duration>0){var self=this;divElement.addEventListener("mouseover",function(event){window.clearTimeout(divElement.timeOutValue);})
divElement.addEventListener("mouseleave",function(){divElement.timeOutValue=window.setTimeout(function(){self.removeElement(divElement);},self.options.duration)})}
if(typeof this.options.destination!=="undefined"){divElement.addEventListener("click",function(event){event.stopPropagation();if(this.options.newWindow===true){window.open(this.options.destination,"_blank");}else{window.location=this.options.destination;}}.bind(this));}
if(typeof this.options.onClick==="function"&&typeof this.options.destination==="undefined"){divElement.addEventListener("click",function(event){event.stopPropagation();this.options.onClick();}.bind(this));}
if(typeof this.options.offset==="object"){var x=getAxisOffsetAValue("x",this.options);var y=getAxisOffsetAValue("y",this.options);var xOffset=this.options.position=="left"?x:"-"+x;var yOffset=this.options.gravity=="toastify-top"?y:"-"+y;divElement.style.transform="translate("+xOffset+","+yOffset+")";}
return divElement;},showToast:function(){this.toastElement=this.buildToast();var rootElement;if(typeof this.options.selector==="string"){rootElement=document.getElementById(this.options.selector);}else if(this.options.selector instanceof HTMLElement||(typeof ShadowRoot!=='undefined'&&this.options.selector instanceof ShadowRoot)){rootElement=this.options.selector;}else{rootElement=document.body;}
if(!rootElement){throw"Root element is not defined";}
var elementToInsert=Toastify.defaults.oldestFirst?rootElement.firstChild:rootElement.lastChild;rootElement.insertBefore(this.toastElement,elementToInsert);Toastify.reposition();if(this.options.duration>0){this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement);}.bind(this),this.options.duration);}
return this;},hideToast:function(){if(this.toastElement.timeOutValue){clearTimeout(this.toastElement.timeOutValue);}
this.removeElement(this.toastElement);},removeElement:function(toastElement){toastElement.className=toastElement.className.replace(" on","");window.setTimeout(function(){if(this.options.node&&this.options.node.parentNode){this.options.node.parentNode.removeChild(this.options.node);}
if(toastElement.parentNode){toastElement.parentNode.removeChild(toastElement);}
this.options.callback.call(toastElement);Toastify.reposition();}.bind(this),400);},};Toastify.reposition=function(){var topLeftOffsetSize={top:15,bottom:15,};var topRightOffsetSize={top:15,bottom:15,};var offsetSize={top:15,bottom:15,};var allToasts=document.getElementsByClassName("toastify");var classUsed;for(var i=0;i<allToasts.length;i++){if(containsClass(allToasts[i],"toastify-top")===true){classUsed="toastify-top";}else{classUsed="toastify-bottom";}
var height=allToasts[i].offsetHeight;classUsed=classUsed.substr(9,classUsed.length-1)
var offset=15;var width=window.innerWidth>0?window.innerWidth:screen.width;if(width<=360){allToasts[i].style[classUsed]=offsetSize[classUsed]+"px";offsetSize[classUsed]+=height+offset;}else{if(containsClass(allToasts[i],"toastify-left")===true){allToasts[i].style[classUsed]=topLeftOffsetSize[classUsed]+"px";topLeftOffsetSize[classUsed]+=height+offset;}else{allToasts[i].style[classUsed]=topRightOffsetSize[classUsed]+"px";topRightOffsetSize[classUsed]+=height+offset;}}}
return this;};function getAxisOffsetAValue(axis,options){if(options.offset[axis]){if(isNaN(options.offset[axis])){return options.offset[axis];}
else{return options.offset[axis]+'px';}}
return'0px';}
function containsClass(elem,yourClass){if(!elem||typeof yourClass!=="string"){return false;}else if(elem.className&&elem.className.trim().split(/\s+/gi).indexOf(yourClass)>-1){return true;}else{return false;}}
Toastify.lib.init.prototype=Toastify.lib;return Toastify;});;
var HappycowCookies=(function(){const defaultOptions={path:'/',};function setCookie(key,value,options){if(!navigator.cookieEnabled){return false;}
let cookieValue=`${encode(key)}=${encode(value)}`;if(options){Object.assign(defaultOptions,options);}
if(options.expires){const date=new Date();date.setTime(date.getTime()+options.expires*60*60*24*1000);cookieValue+=`; expires=${date.toUTCString()}`;}
if(options.path){cookieValue+=`; path=${options.path}`;}
if(options.domain){cookieValue+=`; domain=${options.domain}`;}
if(options.secure){cookieValue+='; secure';}
if(options.samesite){cookieValue+=`; samesite=${options.samesite}`;}
document.cookie=cookieValue;}
function getCookie(key){if(!document.cookie)return false;const cookies=decode(document.cookie).split(/; */);for(const cookie of cookies){const cookieArr=cookie.split('=');if(cookieArr[0]===decode(key)){return cookieArr[1];}}
return undefined;}
function deleteCookie(key,path){if(!document.cookie)return false;const cookieValue=encode(key);if(path){document.cookie=`${cookieValue}=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${path}`;return;}
document.cookie=`${cookieValue}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`;}
function deleteAllCookies(){if(!document.cookie)return false;const cookies=decode(document.cookie).split(/; */);for(const cookie of cookies){const cookieArr=cookie.split('=');document.cookie=`${cookieArr[0]}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`;}}
function encode(value){return String(value).replace(/[,;"\\=\s%]/g,(character)=>encodeURIComponent(character));}
function decode(value){return decodeURIComponent(value);}
return{setCookie,getCookie,deleteCookie,deleteAllCookies,};})();;
var HappycowTabs=(function(){function init(){const tabTriggers=document.querySelectorAll('[data-trigger="tab"]');tabTriggers.forEach((item)=>{item.addEventListener('click',(e)=>{e.preventDefault();const ref=e.target.getAttribute('href');if(!ref)return;const tab=document.querySelector(ref);if(!tab)return;tab.closest('.tab-content').querySelectorAll('.tab-pane').forEach((tabPaneItem)=>{tabPaneItem.classList.add('hidden');tabPaneItem.classList.remove('active');});tab.classList.remove('hidden');tab.classList.add('active');item.closest('.nav-tabs').querySelectorAll('.nav-item').forEach((navItem)=>{navItem.classList.remove('active');});item.parentElement.classList.add('active');dispatchCustomEvent(item,'shown.hc.tab',e.target);});});}
return{init:init,};})();;
var HappycowTypeahead=function(){const list=`<div role="listbox" class="tt-listbox bg-white absolute z-10 w-full rounded-md mt-2 py-3 shadow-dropdown hidden" aria-expanded="false"></div>`;const template=`<div role="presentation">{template}</div>`;const option=`<p role="option" class="text-base font-normal py-2 px-5 cursor-pointer autocomplete-suggestion hover:bg-gray-100">{template}</p>`;const sources={venues:{url:'/ajax/autocomplete/venues',cb:handleVenues,controller:null,},users:{url:'/ajax/autocomplete/users',cb:handleUsers,controller:null,},places:{url:'/ajax/autocomplete/places',cb:handlePlaces,controller:null,},google:{url:false,cb:handleGoogle,controller:null,},geonames:{url:'/hcediting/ajax/autocomplete/geonames',cb:handleGeonames,controller:null,},};let el=null;let query='';let limit=3;let minLength=3;let localStorageManager=null;let history=false;let historyData=[];function init(id,params){localStorageManager=new HappycowLocalStorageManager();historyData=getHistoryData();el=document.querySelector(id);if(!el)return;const div=document.createElement('div');div.classList.add('relative','inline-block','w-full',`${el.id}-typeahead-container`);wrap(el,div);appendContent(div,list);div.lastChild.setAttribute('id',`${el.id}-autcomplete`);el.classList.add('relative','align-top','z-9');const listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;if('template'in params){const templateData=template.replace('{template}',params.template);appendContent(listbox,templateData);listbox.lastChild.setAttribute('id',`${el.id}-template-autocomplete`);}
if('listboxClass'in params){params.listboxClass.forEach((listClass)=>{listbox.classList.add(listClass);});}
if('limit'in params){limit=params.limit;}
if('minLength'in params){minLength=params.minLength;}
if('history'in params){history=Boolean(params.history);}
addOnEventListener('keyup',id,function(e){if('template'in params){const listboxEl=getNextSibling(el,'[role="listbox"]');listboxEl.classList.remove('hidden');}
const code=e.key;if(code){if(code.toUpperCase()==='ARROWLEFT'||code.toUpperCase()==='ARROWUP'||code.toUpperCase()==='ARROWRIGHT'||code.toUpperCase()==='ARROWDOWN'){return;}}
cleanUp();if(el.value.length<minLength){return;}
query=el.value;displayHistory();if('data'in params){params.data.forEach((item)=>{if(item==sources.google){setupGoogle(item,query);return;}
setupSource(item,query);});}});addLiveEventListener('click',`.${el.id}-typeahead-container .autocomplete-suggestion`,function(e){e.preventDefault();saveItemInHistory(JSON.parse(this.dataset.obj));if('selected'in params){params.selected(JSON.parse(this.dataset.obj));}});document.addEventListener('click',function(event){const listboxEl=getNextSibling(el,'[role="listbox"]');if(!listboxEl)return;if(event.target==el&&listboxEl.childElementCount>0){listboxEl.classList.remove('hidden');return;}
if(event.target.classList.contains('autocomplete-suggestion')||(event.target.parentElement&&event.target.parentElement.classList.contains('autocomplete-suggestion'))){listboxEl.classList.add('hidden');return;}
if(!event.target.closest('[role="listbox"]')){listboxEl.classList.add('hidden');return;}
if(event.target.closest('[role="listbox"]')==listboxEl&&listboxEl.childElementCount>0){listboxEl.classList.remove('hidden');}},false);}
function displayHistory(){if(!history)return;const currentPresentation=document.querySelector(`#${el.id}-history-autocomplete`);if(currentPresentation)currentPresentation.remove();data=historyData.filter((item)=>{const re=new RegExp(query,'gi');return re.test(getObjValue(item));});if(data.length==0)return;const header='<h3 class="tt-title text-xl text-primary-500 border-gray-300 border-b mt-3 mb-1 pb-1 mx-5">History</h3>';const templateData=template.replace('{template}',header);let listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;const firstPresentation=listbox.querySelector(`div:not(#${el.id}-template-autocomplete)`);if(firstPresentation){listbox=firstPresentation.parentElement;}
appendContent(listbox,templateData);listbox.lastChild.setAttribute('id',`${el.id}-history-autocomplete`);data.forEach((item,key)=>{if(key>=limit)return;let optionData=null;if(item.city){optionData=option.replace('{template}',`
                    <svg class="text-gray-600 h-5 w-5 -mt-1 inline-flex mr-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" fill="none">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    ${getObjValue(item)}
                `);}else{optionData=option.replace('{template}',getObjValue(item));}
appendContent(listbox.lastChild,optionData);if(listbox.lastChild){const lastChild=listbox.lastChild.querySelector('p.autocomplete-suggestion:last-child');if(lastChild)lastChild.dataset.obj=JSON.stringify(item);}});}
function getObjValue(obj){if(obj.location)return obj.location;if(obj.venue)return obj.venue;return'';}
function setupGoogle(item,querySource){const service=new google.maps.places.AutocompleteService();service.getPlacePredictions({input:querySource,types:['establishment'],sessionToken:sessionToken,},function(predictions,status){if(status==google.maps.places.PlacesServiceStatus.OK){const data=predictions.map(function(value,index){return{place:value.description,placeId:value.place_id,};});item.cb(data);}});}
function setupSource(item,querySource){const urlParams=new URLSearchParams();urlParams.set('q',querySource);if(item.controller){item.controller.abort();}
item.controller=new AbortController();const signal=item.controller.signal;if(item.url.includes('places')){setTimeout(function(){request(`${item.url}?${urlParams.toString()}`,signal).then((data)=>{item.controller=null;item.cb(data);}).catch((err)=>{});},200);return;}
request(`${item.url}?${urlParams.toString()}`,signal).then((data)=>{item.controller=null;item.cb(data);}).catch((err)=>{});}
function request(url,signal){return get(url,{target:false,signal:signal});}
function cleanUp(){['venues','locations','history','google','geonames'].forEach((item)=>{const currentPresentation=document.querySelector(`#${el.id}-${item}-autocomplete`);if(currentPresentation)currentPresentation.remove();});const listbox=getNextSibling(el,'[role="listbox"]');if(listbox&&listbox.childElementCount==0){listbox.classList.add('hidden');}}
function handleGeonames(data){const currentPresentation=document.querySelector(`#${el.id}-geonames-autocomplete`);if(currentPresentation)currentPresentation.remove();if(data.results.length==0)return;const header='<h3 class="tt-title text-xl text-primary-500 border-gray-300 border-b mt-3 mb-1 pb-1 mx-5">Geonames</h3>';const templateData=template.replace('{template}',header);const listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;listbox.classList.remove('hidden');appendContent(listbox,templateData);listbox.lastChild.setAttribute('id',`${el.id}-geonames-autocomplete`);data.results.forEach((item,key)=>{if(key>=limit)return;const optionData=option.replace('{template}',`${item.name}, ${item.admin1}, ${item.country}`);appendContent(listbox.lastChild,optionData);if(listbox.lastChild){const lastChild=listbox.lastChild.querySelector('p.autocomplete-suggestion:last-child');if(lastChild)lastChild.dataset.obj=JSON.stringify(item);}});}
function handleUsers(data){const currentPresentation=document.querySelector(`#${el.id}-users-autocomplete`);if(currentPresentation)currentPresentation.remove();if(data.results.length==0)return;const header='<h3 class="tt-title text-xl text-primary-500 border-gray-300 border-b mt-3 mb-1 pb-1 mx-5">Users</h3>';const templateData=template.replace('{template}',header);const listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;listbox.classList.remove('hidden');appendContent(listbox,templateData);listbox.lastChild.setAttribute('id',`${el.id}-users-autocomplete`);data.results.forEach((item,key)=>{if(key>=limit)return;const optionData=option.replace('{template}',item.username);appendContent(listbox.lastChild,optionData);if(listbox.lastChild){const lastChild=listbox.lastChild.querySelector('p.autocomplete-suggestion:last-child');if(lastChild)lastChild.dataset.obj=JSON.stringify(item);}});}
function handleVenues(data){const currentPresentation=document.querySelector(`#${el.id}-venues-autocomplete`);if(currentPresentation)currentPresentation.remove();if(data.results.length==0)return;const header='<h3 class="tt-title text-xl text-primary-500 border-gray-300 border-b mt-3 mb-1 pb-1 mx-5">Restaurants and Stores</h3>';const templateData=template.replace('{template}',header);const listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;listbox.classList.remove('hidden');let presentation=listbox;const firstPresentation=listbox.querySelector(`div#${el.id}-google-autocomplete`);if(firstPresentation){appendContent(firstPresentation,templateData,'beforebegin');presentation=firstPresentation.previousElementSibling;presentation.setAttribute('id',`${el.id}-venues-autocomplete`);}else{appendContent(listbox,templateData);presentation=listbox.lastChild;presentation.setAttribute('id',`${el.id}-venues-autocomplete`);}
data.results.forEach((item,key)=>{if(key>=limit)return;let text=item.venue;if(item.friend){text=`
                    <svg class="happycow-friend inline-flex h-4 w-4 mr-1 text-yellow-500"  xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path fill="#ffcc00" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                    </svg>
                    ${item.venue}
                `;}else{text=`
                    <svg class="text-gray-600 h-5 w-5 -mt-1 inline-flex mr-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" fill="none">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    ${item.venue}
                `;}
const optionData=option.replace('{template}',text);appendContent(presentation,optionData);presentation.querySelector('p.autocomplete-suggestion:last-child').dataset.obj=JSON.stringify(item);});}
function handleGoogle(data){const currentPresentation=document.querySelector(`#${el.id}-google-autocomplete`);if(currentPresentation)currentPresentation.remove();if(data.length==0)return;const header='<h3 class="tt-title text-xl text-primary-500 border-gray-300 border-b mt-3 mb-1 pb-1 mx-5">More results from the net...</h3>';const templateData=template.replace('{template}',header);const listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;listbox.classList.remove('hidden');appendContent(listbox,templateData);listbox.lastChild.setAttribute('id',`${el.id}-google-autocomplete`);data.forEach((item,key)=>{if(key>=limit)return;const optionData=option.replace('{template}',item.place);appendContent(listbox.lastChild,optionData);if(listbox.lastChild){const lastChild=listbox.lastChild.querySelector('p.autocomplete-suggestion:last-child');if(lastChild)lastChild.dataset.obj=JSON.stringify(item);}});}
function handlePlaces(data){const currentPresentation=document.querySelector(`#${el.id}-locations-autocomplete`);if(currentPresentation)currentPresentation.remove();data.results=data.results.filter((item)=>{if(item.location)return true;return false;});if(data.results.length==0)return;const header='<h3 class="tt-title text-xl text-primary-500 border-gray-300 border-b mt-3 mb-1 pb-1 mx-5">Locations</h3>';const templateData=template.replace('{template}',header);const listbox=getNextSibling(el,'[role="listbox"]');if(!listbox)return;listbox.classList.remove('hidden');let presentation=listbox;const firstPresentation=listbox.querySelector(`div:not(#${el.id}-history-autocomplete):not(#${el.id}-template-autocomplete)`);if(firstPresentation){appendContent(firstPresentation,templateData,'beforebegin');presentation=firstPresentation.previousElementSibling;presentation.setAttribute('id',`${el.id}-locations-autocomplete`);}else{presentation=listbox.lastChild?listbox.lastChild:listbox;appendContent(presentation,templateData);presentation=presentation.lastChild;presentation.setAttribute('id',`${el.id}-locations-autocomplete`);}
data.results.forEach((item,key)=>{if(key>=limit)return;const optionData=option.replace('{template}',`
                <svg class="text-gray-600 h-5 w-5 -mt-1 inline-flex mr-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" fill="none">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                ${item.location}
            `);appendContent(presentation,optionData);presentation.querySelector('p.autocomplete-suggestion:last-child').dataset.obj=JSON.stringify(item);});}
function saveItemInHistory(obj){if(localStorageManager===null){return;}
const localData=localStorageManager.getItem('searchHistory');const newDataToStore=getObjData(obj);if(newDataToStore===null){return;}
if(localData===null){const selections=[];selections.unshift(newDataToStore);localStorageManager.setItem('searchHistory',selections);return;}
if(itemExists(localData,newDataToStore)){return;}
if(localData.length<10){localData.unshift(newDataToStore);localStorageManager.setItem('searchHistory',localData);return;}
localData.pop();localData.unshift(newDataToStore);localStorageManager.setItem('searchHistory',localData);}
function getHistoryData(){const data=localStorageManager.getItem('searchHistory');if(data!==null){return data;}
return[];}
function itemExists(listData,item){return((item.venue&&listData.find(function(o){return o.venue===item.venue;}))||(item.location&&listData.find(function(o){return o.location===item.location;})));}
function getObjData(obj){if(obj.location||obj.venue){return obj;}
return null;}
function close(id){const element=document.querySelector(id);if(!element)return;const listbox=getNextSibling(element,'[role="listbox"]');if(!listbox)return;listbox.classList.add('hidden');element.blur();}
return{init:init,close:close,sources:sources,saveQuery:saveItemInHistory,};};;
var HappycowLocalStorage=function(){function hasSupport(){if(window.localStorage){return true;}
return false;}
function set(name,item){if(hasSupport()){window.localStorage.setItem(name,item);}}
function get(name){if(hasSupport()){return window.localStorage.getItem(name);}
return null;}
function remove(name){if(hasSupport()){window.localStorage.removeItem(name);}
return this;}
function clear(){if(hasSupport()){window.localStorage.clear();}}
return{hasSupport:hasSupport,setItem:set,removeItem:remove,getItem:get,clear:clear,};};;
var HappycowLocalStorageManager=function(){const lStorage=new HappycowLocalStorage();function set(name,item){if(lStorage.hasSupport()){window.localStorage.setItem(name,JSON.stringify(item));return this;}
HappycowCookies.setCookie(name,JSON.stringify(item),{expires:365,});return this;}
function remove(name){if(lStorage.hasSupport()){window.localStorage.removeItem(name);return this;}
HappycowCookies.deleteCookie(name);return this;}
function clear(){if(lStorage.hasSupport()){window.localStorage.clear();return this;}
HappycowCookies.deleteAllCookies();return this;}
function get(name){let data=null;if(lStorage.hasSupport()&&window.localStorage.getItem(name)!=null){data=JSON.parse(window.localStorage.getItem(name));return data;}
if(HappycowCookies.getCookie(name)!=null){data=JSON.parse(HappycowCookies.getCookie(name));}
return data;}
return{setItem:set,removeItem:remove,getItem:get,clear:clear,};};;
var HappycowNoticeBar=(()=>{const options={text:'',link:'/',linkTitle:'View More',cookieName:'noticeBar',cssBgClass:'bg-primary-500',cssCustomClass:'',date:null,};const noticeBarTemplate=(text,link,linkTitle,cssClasses)=>`
        <div id="notice-bar" class="notice-bar sticky top-0 min-h-10 w-full flex items-center z-30 md:h-10 ${cssClasses}">
            <div class="flex items-center px-2 w-full">
                <div class="flex items-center w-full md:justify-center">
                    <p class="text-xs text-white leading-tight pr-3 md:text-sm md:px-0">${text}</p>
                    <a href="${link}" target="_blank" class="underline text-white text-xs -mt-px flex-0-0-auto ml-auto leading-normal md:text-sm md:ml-4">${linkTitle}</a>
                </div>
                <button type="button" id="btn-bar-close" class="flex-0-0-auto p-2 ml-auto -mr-2 xl:mr-0" aria-label="close">
                    <svg class="pointer-event-none h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>
    `;function setBar(customOptions=options){Object.assign(options,customOptions);if(HappycowCookies.getCookie(`${options.cookieName}`))return;if(options.date){const deadlineDate=new Date(options.date);const userDate=new Date(Date.now());const userDatePST=userDate.toLocaleDateString('en-US',{timeZone:'America/Los_Angeles'});if(userDatePST>=deadlineDate.toLocaleString('en-US',{year:'numeric',month:'numeric',day:'numeric'}))return;}
if(document.querySelector('#notice-bar')){deleteElement('#notice-bar');}
const barTemplate=noticeBarTemplate(options.text,options.link,options.linkTitle,`${options.cssBgClass} ${options.cssCustomClass}`);prependContent('body',barTemplate);document.body.classList.add('notice-bar-visible');addLiveEventListener('click','#btn-bar-close',()=>{closeBar(options.cookieName);});}
function closeBar(cookieName='noticeBar'){HappycowCookies.setCookie(`${cookieName}`,false,{path:'/'});document.body.classList.remove('notice-bar-visible');document.querySelector('.navbar').style.top='0px';deleteElement('#notice-bar');}
return{setBar:setBar,closeBar:closeBar,};})();;
var HappycowToastr=(function(){let currentToast=null;const toastrErrorTemplate=(msg)=>`
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <span>${msg}</span>
    `;const toastrSuccessTemplate=(msg)=>`
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:h-6 md:w-6 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>${msg}</span>
    `;function basic(msg,template=null,duration=2500){const options={duration:duration,gravity:'bottom',position:'center',backgroundColor:'white',className:'toastify-hc',offset:{y:25,},onClick:()=>{if(currentToast){currentToast.hideToast();}},};if(currentToast){currentToast.hideToast();}
if(template){const html=document.createElement('div');html.classList.add('toastify-hc-content','flex','items-center','space-x-2','md:space-x-3');html.insertAdjacentHTML('beforeend',template);options.node=html;currentToast=Toastify(options).showToast();return;}
options.text=msg;currentToast=Toastify(options).showToast();}
function error(msg,duration=2500){if(currentToast){currentToast.hideToast();}
const html=document.createElement('div');html.classList.add('toastify-hc-content','flex','items-center','space-x-2','md:space-x-3');html.insertAdjacentHTML('beforeend',toastrErrorTemplate(msg));currentToast=Toastify({node:html,duration:duration,backgroundColor:'white',gravity:'bottom',position:'center',className:'toastify-hc',offset:{y:25,},onClick:()=>{if(currentToast){currentToast.hideToast();}},}).showToast();}
function success(msg,duration=2500){if(currentToast){currentToast.hideToast();}
const html=document.createElement('div');html.classList.add('toastify-hc-content','flex','items-center','space-x-2','md:space-x-3');html.insertAdjacentHTML('beforeend',toastrSuccessTemplate(msg));currentToast=Toastify({node:html,duration:duration,backgroundColor:'white',gravity:'bottom',position:'center',className:'toastify-hc',offset:{y:25,},onClick:()=>{if(currentToast){currentToast.hideToast();}},}).showToast();}
return{basic:basic,error:error,success:success,};})();;
(()=>{const RECAPTCHA_FORGOT_PASSWORD=1;const RECAPTCHA_REGISTER=2;let recaptchaType=null;const authenticationModal=document.querySelector('#authentication-modal');const register=new HappycowRegister();register.init('form#modal-register-form');if(!authenticationModal)return;const navItemLogin=authenticationModal.querySelector('.nav-item-login');const loginTab=authenticationModal.querySelector('#login');const recaptchaAuthentication=document.querySelector('.g-recaptcha-authentication');addLiveEventListener('click','#authentication-modal .nav-item-register a',()=>{authenticationModal.classList.add('modal-register-step-1');HappycowAnalytics.gtagEvent('signup_start');getRegisterFirstStepView();});addLiveEventListener('click','#authentication-modal .nav-item-login a',()=>{authenticationModal.classList.remove('modal-register-step-1');});addLiveEventListener('click','#authentication-modal .modal-close',(e)=>{if(authenticationModal.classList.contains('modal-register-step-2')){e.stopPropagation();HappycowAlert.alertExit(false);HappycowAnalytics.gtagEvent('signup_exit_popup');return;}
if(!authenticationModal.classList.contains('modal-register-step-3')){HappycowAnalytics.gtagEvent('auth_cancel');}
backToLoginTab();HappycowAlert.deleteAlertBox('#authentication-modal');});addLiveEventListener('click','#authentication-modal .btn-register-success',()=>{HappycowModal.close('#authentication-modal');backToLoginTab();});addLiveEventListener('click','#modal-register-form .btn-toggler-next',()=>{const registerForm=authenticationModal.querySelector('#modal-register-form');HappycowValidator.check(registerForm,false,true).then((result)=>{if(!result){HappycowToastr.error('Please complete the required fields');return;}
register.setState();getRegisterSecondStepView();HappycowAnalytics.gtagEvent('signup_next');}).catch((e)=>{HappycowToastr.error('Please complete the required fields');});});addLiveEventListener('click','body',(e)=>{if(e.target.classList.contains('modal-login')){if(authenticationModal.classList.contains('modal-register-step-2')){e.stopPropagation();HappycowAlert.alertExit(false);HappycowAnalytics.gtagEvent('signup_exit_popup');return;}
if(!authenticationModal.classList.contains('modal-register-step-3')){HappycowAnalytics.gtagEvent('auth_cancel');}
backToLoginTab();HappycowAlert.deleteAlertBox('#authentication-modal');}});addLiveEventListener('click','#modal-alert-exit .btn-alert-exit',()=>{backToLoginTab();HappycowAlert.deleteAlertExit();HappycowModal.close('#authentication-modal');HappycowAnalytics.gtagEvent('auth_cancel');});addLiveEventListener('click','#modal-alert-exit .btn-alert-cancel',()=>{HappycowAlert.deleteAlertExit();appendContent('body',"<div class='modal-backdrop in fixed inset-0 bg-black opacity-30 z-40 hidden md:block'></div>");});addLiveEventListener('shown.hc.modal','#authentication-modal',(e)=>{HappycowGoogleRecaptcha.loadGoogleRecaptcha();if(window.innerWidth<1200){document.body.classList.add('scroll-off');}
if(authenticationModal.classList.contains('open-register')){authenticationModal.classList.add('modal-register-step-1');HappycowAnalytics.gtagEvent('signup_start');getRegisterFirstStepView();navItemLogin.classList.remove('active');loginTab.classList.remove('active');document.querySelector('#authentication-modal .nav-item-register').classList.add('active');document.querySelector('#authentication-modal #register').classList.add('active');document.querySelector('#authentication-modal #register').classList.remove('hidden');return;}
if(!navItemLogin.classList.contains('active')){backToLoginTab();}});addLiveEventListener('hidden.hc.modal','#authentication-modal',()=>{if(window.innerWidth<1200){document.body.classList.remove('scroll-off');}
if(authenticationModal.classList.contains('open-register')){authenticationModal.classList.remove('open-register');backToLoginTab();}});addLiveEventListener('click','#authentication-modal .btn-forgot-password-toggle',()=>{authenticationModal.classList.toggle('modal-auth-full-width');navItemLogin.classList.toggle('active');loginTab.classList.toggle('active');document.querySelector('#authentication-modal #recovery-member').classList.toggle('active');document.querySelector('#authentication-modal #recovery-member').classList.toggle('hidden');const alertBox=document.querySelector('#authentication-modal .alert-box');if(!loginTab.classList.contains('active')){if(alertBox)alertBox.classList.add('hidden');return;}
if(alertBox)alertBox.classList.remove('hidden');});addLiveEventListener('submit','#modal-forgot-password-form',(e)=>{e.preventDefault();const forgotPasswordForm=document.querySelector('#modal-forgot-password-form');HappycowValidator.check(forgotPasswordForm,false,true).then((result)=>{if(!result){return;}
if(recaptchaAuthentication){recaptchaType=RECAPTCHA_FORGOT_PASSWORD;grecaptcha.execute(0);return;}
forgotPassword(false);}).catch((error)=>{recaptchaType=null;if(recaptchaAuthentication)grecaptcha.reset(0);HappycowToastr.error('Something went wrong on our side. Please try again later or contact us.');});});addLiveEventListener('click','#authentication-modal .register-container .btn-toggler-prev',()=>{document.querySelector('.register-form-container').classList.add('hidden');register.setState();authenticationModal.classList.remove('modal-auth-full-width','modal-register-step-2');authenticationModal.classList.add('modal-register-step-1');authenticationModal.querySelector('.modal-dialog-right').classList.add('lg:min-h-159');getRegisterFirstStepView();});addLiveEventListener('submit','#authentication-modal #modal-register-form',(e)=>{e.preventDefault();const registerForm=authenticationModal.querySelector('#modal-register-form');HappycowValidator.check(registerForm,false,true).then((result)=>{if(!result){HappycowToastr.error('Please complete the required fields');return;}
register.setState();if(recaptchaAuthentication){recaptchaType=RECAPTCHA_REGISTER;grecaptcha.execute(0);return;}
register.register(null,'#authentication-modal .register-form-container',true);}).catch((error)=>{recaptchaType=null;if(recaptchaAuthentication)grecaptcha.reset(0);HappycowToastr.error('Something went wrong on our side. Please try again later or contact us.');});});function setupRegisterFirstStep(){if(document.querySelector('.register-form-container').classList.contains('hidden')){document.querySelector('.register-form-container').classList.remove('hidden');authenticationModal.querySelector('#dialog-register-step-1').classList.add('fadeIn');authenticationModal.querySelector('.modal-dialog-right').classList.remove('lg:min-h-159');}
register.setItemValue();}
function setupRegisterSecondStep(){authenticationModal.classList.remove('modal-register-step-1');authenticationModal.classList.add('modal-auth-full-width','modal-register-step-2');const typeahead=new HappycowTypeahead();typeahead.init('#modal-register-location',{data:[typeahead.sources.places],history:false,selected:function(obj){document.querySelector('#modal-register-location').value=`${obj.city}, ${obj.country}`;},});register.setItemValue();}
function getRegisterFirstStepView(){get('/ajax/views/register/1',{target:false}).then((result)=>{document.querySelector('#authentication-modal .register-placeholder').classList.add('hidden');emptyElement('#authentication-modal .register-form-container');appendContent('#authentication-modal .register-form-container',result.data);setupRegisterFirstStep();dispatchCustomEvent(document.querySelector('#authentication-modal .register-form-container'),'shown.hc.registration');}).catch(()=>{HappycowToastr.error('Something went wrong on our side. Please try again later or contact us.');});}
function getRegisterSecondStepView(){get('/ajax/views/register/2',{target:false}).then((result)=>{emptyElement('#authentication-modal .register-form-container');appendContent('#authentication-modal .register-form-container',result.data);HappycowAlert.deleteAlertBox('#authentication-modal');setupRegisterSecondStep();}).catch(()=>{HappycowToastr.error('Something went wrong on our side. Please try again later or contact us.');});}
function backToLoginTab(){const registerTab=authenticationModal.querySelector('#authentication-modal #register');const forgotPasswordTab=authenticationModal.querySelector('#authentication-modal #recovery-member');loginTab.classList.add('active');loginTab.classList.remove('hidden');document.querySelector('#authentication-modal .nav-item-register').classList.remove('active');document.querySelector('#authentication-modal .nav-item-login').classList.add('active');document.querySelector('#authentication-modal .register-placeholder').classList.remove('hidden');emptyElement('#authentication-modal .register-form-container');if(registerTab&&registerTab.classList.contains('active')){registerTab.classList.remove('active');registerTab.classList.add('hidden');register.clearState();if(authenticationModal.classList.contains('modal-register-step-3')){authenticationModal.classList.remove('modal-auth-full-width','modal-register-step-3');return;}
if(authenticationModal.classList.contains('modal-register-step-2')){authenticationModal.classList.remove('modal-auth-full-width','modal-register-step-2');return;}
authenticationModal.classList.remove('modal-register-step-1');return;}
if(forgotPasswordTab&&forgotPasswordTab.classList.contains('active')){authenticationModal.classList.remove('modal-auth-full-width');authenticationModal.querySelector('.nav-tabs').classList.remove('hidden');forgotPasswordTab.classList.remove('active');forgotPasswordTab.classList.add('hidden');}}
function forgotPassword(token){const forgotPasswordForm=document.querySelector('#modal-forgot-password-form');const formData=new FormData(forgotPasswordForm);formData.append(csrf.name,csrf.value);formData.append('g-recaptcha-response',token);if(recaptchaAuthentication)grecaptcha.reset(0);post('/ajax/members/forgot-password',formData).then((data)=>{if(data.success){emptyElement('#dialog-recovery-member');appendContent('#dialog-recovery-member',data.view);return;}
HappycowToastr.error(data.message||'Something went wrong on our side. Please try again later or contact us.');}).catch((e)=>{HappycowToastr.error('Something went wrong on our side. Please try again later or contact us.');});}
function authenticationOnSubmit(token){if(recaptchaType==RECAPTCHA_FORGOT_PASSWORD){forgotPassword(token);return;}
if(recaptchaType==RECAPTCHA_REGISTER){if(recaptchaAuthentication)grecaptcha.reset(0);register.register(token,'#authentication-modal .register-form-container',true);}}
window.authenticationOnSubmit=authenticationOnSubmit;})();;
var serviceWorker=null;window.onerror=function(msg,url,lineNo,columnNo,error){sendError(msg,url,lineNo,columnNo,error);};HappycowShare.init();HappycowSidebar.init();HappycowEventsCommon.init();HappycowTabs.init();HappycowAnalytics.init();getUserData();serviceWorker=new HappycowServiceWorker();serviceWorker.register('/js/sw/messages.js','/').then(function(sw){if(sw===null){return;}
pubSub.publish('serviceWorker');}).catch(function(e){});HappycowAds.adblock();addOnEventListener('submit','#newsletter-subscribe',function(e){e.preventDefault();if(!document.querySelector('#terms').checked){HappycowToastr.error('You must agree to the terms of use and privacy policy');return false;}
const email=document.querySelector('#newsletter-email').value;const name=document.querySelector('#newsletter-name').value;const formData=new FormData();formData.append(csrf.name,csrf.value);formData.append('email',email);formData.append('name',name);post('/ajax/newsletter',formData).then(function(result){if(result.success){HappycowToastr.success('Subscribed to the newsletter');return;}
HappycowToastr.error(d.message);}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again later or contact us.');});});function setUserBtn(result){const navbarLoggedOut=document.querySelector('#navbar-logged-out');const navbarNotify=document.querySelector('.navbar-notifications');const navbarMobileLoginButton=document.querySelector('.navbar-mobile-btn');if(result.success){emptyElement('#navbar-logged-in');appendContent('#navbar-logged-in',result.data.loginView);document.querySelector('#navbar-logged-in').classList.remove('hidden');emptyElement('.navbar-notifications');appendContent('.navbar-notifications',result.data.notificationsView);document.querySelector('.navbar-notifications').classList.remove('hidden');navbarLoggedOut.classList.add('hidden','md:hidden');navbarMobileLoginButton.classList.add('hidden');return;}
navbarLoggedOut.classList.remove('hidden','md:hidden');navbarMobileLoginButton.classList.remove('hidden');navbarNotify.classList.add('hidden');}
function getUserData(){HappycowCommon.userData().then(function(result){document.querySelectorAll('#navbar-logged-out, .navbar-mobile-btn').forEach((item)=>item.classList.remove('opacity-50','pointer-events-none'));const csrfEl=document.querySelector('._csrf');if(csrfEl){csrfEl.setAttribute('name',result.data.csrf.key);csrfEl.value=result.data.csrf.token;csrf=HappycowCommon.csrf();}
setUserBtn(result);var memberNotifications=new HappycowMemberNotifications();memberNotifications.init();setNewsletterVisibility(result.data);setFooterVisibility(result.data);setCityPageAmbassadorOptions(result.data);pubSub.publish('userData',result.data);HappycowCommon.setObserver('.logged-in-actions .lazy-js-image');}).catch(function(e){});}
function logError(errorMsg){sendError(errorMsg,window.location.pathname,0,0,'Helper error');}
function showError(errorMsg,userMsg='Looks like we have a problem on our end. We track these errors automatically but if the problems persists please contact us.'){HappycowToastr.error(userMsg);sendError(errorMsg,window.location.pathname,0,0,'Helper error');}
function sendError(msg,url,lineNo,columnNo,error){var formData=new FormData();const csrfEl=document.querySelector('._csrf');if(!csrfEl)return;formData.append(csrfEl.getAttribute('name'),csrfEl.value);formData.append('msg',JSON.stringify(msg));formData.append('url',url);formData.append('lineNo',lineNo);formData.append('columnNo',columnNo);formData.append('userAgent',navigator.userAgent);formData.append('error',error);formData.append('locationUrl',window.location.href);post('/ajax/logger/js/',formData,{target:false}).then(()=>{}).catch(()=>{});}
function setCityPageAmbassadorOptions(data){const newestOption=document.querySelector('.sort-by-newest');const isCityPage=document.querySelector('.city-page');if(!isCityPage){return;}
if(!data.username){return;}
if(data.userPoints<108){if(newestOption)newestOption.remove();return;}
document.querySelector('.sort-by-newest').classList.remove('hidden');}
function setNewsletterVisibility(data){const newsletter=document.querySelector('.newsletter');if(newsletter&&data.username){newsletter.classList.add('hidden');}}
function setFooterVisibility(data){const footerLoggedIn=document.querySelector('.footer .logged-in');const footerLoggedOut=document.querySelector('.footer .logged-in');if(data.username){if(footerLoggedIn)footerLoggedIn.classList.remove('hidden');if(footerLoggedOut)footerLoggedOut.classList.add('hidden');return;}
if(footerLoggedIn)footerLoggedIn.classList.add('hidden');if(footerLoggedOut)footerLoggedOut.classList.remove('hidden');}
function toggleVisibilityPassword(target){const input=target.parentElement.querySelector('input');if(input.type==='password'){input.type='text';target.innerHTML=`
            <svg class="pointer-events-none h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
            </svg>
        `;return;}
input.type='password';target.innerHTML=`
        <svg class="pointer-events-none h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
    `;}
addLiveEventListener('click','.toggle-password-visibility',(e)=>{toggleVisibilityPassword(e.target);});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="top-rated"]','nav_select',{selected_tab:'explore_top_rated',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="community"]','nav_select',{selected_tab:'community',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="blog"]','nav_select',{selected_tab:'blog',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="the-app"]','nav_select',{selected_tab:'the_app',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="shop"]','nav_select',{selected_tab:'shop',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="more-recipes"]','nav_select',{selected_tab:'more_recipes',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="more-why-vegan"]','nav_select',{selected_tab:'more_why_vegan',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="more-travel-trips"]','nav_select',{selected_tab:'more_travel_trips',});HappycowAnalytics.gtagEventLink('.navbar [data-analytics="more-resources"]','nav_select',{selected_tab:'more_resources',});addLiveEventListener('click','.link-logged-out',()=>{HappycowAnalytics.gtagEvent('logout');});;
if(!('IntersectionObserver'in window)||!('IntersectionObserverEntry'in window)||!('intersectionRatio'in window.IntersectionObserverEntry.prototype)){loadJs('/modules/intersection-observer/intersection-observer.js').then(function(){HappycowObserver.init();});}else{HappycowObserver.init();};
var HappycowListingCommon=(function(){function removeImage(imageEl){const imageId=imageEl.dataset.id;const id=imageEl.dataset.venueId;const formData=new FormData();formData.append(csrf.name,csrf.value);HappycowAlert.loading();post(`/ajax/venues/${id}/image/${imageId}/delete`,formData).then(function(data){if(data.success){imageEl.closest('.venue-list-images').remove();return;}
HappycowToastr.error('Looks like this image no longer can be deleted. Contact us if you wish to delete it.');}).catch(function(){HappycowToastr.error('Something went wrong. Please try again later or contact us.');}).finally(function(){HappycowAlert.terminate();});}
function isOpen(onlyInfo=false){const headerEl=document.querySelector('.header-title');if(!headerEl||headerEl.classList.contains('closed')){return false;}
const id=headerEl.dataset.id;if(!id||!headerEl.dataset.url){return false;}
get(`/ajax/views/hours/${id}`).then((result)=>{if(!result.success){return false;}
if(onlyInfo){emptyElement('.venue-hours-info-container');appendContent('.venue-hours-info-container',result.hourInfo);return false;}
emptyElement('.venue-hours-container');appendContent('.venue-hours-container',result.hourStatus);emptyElement('.venue-hours-info-container');appendContent('.venue-hours-info-container',result.hourInfo);appendContent('body',result.hourDetail);});}
return{removeImage:function(imageEl){HappycowAlert.alert({title:'Delete image',message:'Are you sure?',modalSmall:true,buttons:{cancel:true,confirm:{text:'Confirm',value:true,closeModal:false,},},}).then(function(value){if(value){removeImage(imageEl);}});},isOpen:isOpen,};})();;
var HappycowGallery=function(){const localStorageManager=new HappycowLocalStorageManager();const textMax=250;let controller=null;let elem=null;let xDown=null;let yDown=null;let referenceEl=null;let currentImageId=null;let galleryOptions={miniGallery:false,galleryTypeParam:'',};const shareTemplate=`
        <svg class="h-5 w-5 md:h-6 md:w-6 text-primary-500" xm
        'lns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
        </svg>
        <span>
            URL Copied
        </span>
    `;const miniGalleryImageTemplate=(href,dataId,dataIndex,dataLast,thumbnailImg,imgAlt)=>`
        <div class="carousel-item mb-3 flex-shrink-0 flex-grow-0 ${dataId == currentImageId ? 'active' : ''}">
            <figure class="relative overflow-hidden h-13 w-13 rounded-md" itemscope itemtype="http://schema.org/ImageObject">
                <a href="${href}" data-image-id="${dataId}" data-index="${dataIndex}" data-last="${dataLast}">
                    <img src="${thumbnailImg}" alt="${imgAlt}" class="pointer-events-none object-cover w-full h-full">
                </a>
            </figure>
        </div>
    `;const miniGalleryVideoTemplate=(href,dataId,dataIndex,dataLast,videoThumbnail,videoAlt)=>`
        <div class="carousel-item mb-3 flex-shrink-0 flex-grow-0 cursor-pointer ${dataId == currentImageId ? 'active' : ''}">
            <figure class="relative overflow-hidden h-13 w-13 rounded-md" itemscope itemtype="http://schema.org/ImageObject">
                <a data-type="video" class="w-full h-full flex items-center justify-center" data-video="${href}" alt="${videoAlt}" data-image-id="${dataId}" data-index="${dataIndex}" data-last="${dataLast}">
                    <span itemprop="thumbnail" class="pointer-events-none block w-full h-full m-0 bg-center bg-no-repeat bg-[length:100px]" style="background-image: url(${videoThumbnail}) !important;"></span>
                    <span class="absolute pointer-events-none">
                        <svg class="text-white w-7 h-7" viewBox="0 0 80 80" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M40 5C20.6719 5 5 20.6719 5 40C5 59.3281 20.6719 75 40 75C59.3281 75 75 59.3281 75 40C75 20.6719 59.3281 5 40 5ZM40 69.0625C23.9531 69.0625 10.9375 56.0469 10.9375 40C10.9375 23.9531 23.9531 10.9375 40 10.9375C56.0469 10.9375 69.0625 23.9531 69.0625 40C69.0625 56.0469 56.0469 69.0625 40 69.0625Z" fill="white"/>
                            <path d="M40 10.9375C23.9531 10.9375 10.9375 23.9531 10.9375 40C10.9375 56.0469 23.9531 69.0625 40 69.0625C56.0469 69.0625 69.0625 56.0469 69.0625 40C69.0625 23.9531 56.0469 10.9375 40 10.9375ZM52.8203 40.4844L35.7578 52.8984C35.6643 52.9657 35.554 53.0058 35.4391 53.0144C35.3243 53.023 35.2093 52.9999 35.1067 52.9474C35.0042 52.8949 34.9181 52.8152 34.8579 52.7169C34.7977 52.6187 34.7658 52.5058 34.7656 52.3906V27.5781C34.7652 27.4627 34.7968 27.3494 34.8569 27.2509C34.9169 27.1523 35.0031 27.0723 35.1059 27.0197C35.2086 26.9671 35.3239 26.944 35.439 26.9529C35.5541 26.9619 35.6644 27.0025 35.7578 27.0703L52.8203 39.4766C52.9009 39.5336 52.9667 39.6091 53.0121 39.6968C53.0574 39.7844 53.0811 39.8817 53.0811 39.9805C53.0811 40.0792 53.0574 40.1765 53.0121 40.2642C52.9667 40.3519 52.9009 40.4274 52.8203 40.4844Z" fill="black" fill-opacity="0.5"/>
                            <path d="M52.8203 39.4762L35.7578 27.0699C35.6644 27.0021 35.5541 26.9615 35.439 26.9526C35.3239 26.9436 35.2086 26.9667 35.1059 27.0193C35.0031 27.0719 34.917 27.1519 34.8569 27.2505C34.7968 27.349 34.7652 27.4623 34.7656 27.5777V52.3902C34.7658 52.5054 34.7977 52.6183 34.8579 52.7166C34.9181 52.8148 35.0042 52.8945 35.1067 52.947C35.2093 52.9995 35.3243 53.0227 35.4391 53.014C35.554 53.0054 35.6643 52.9653 35.7578 52.898L52.8203 40.484C52.9009 40.427 52.9667 40.3515 53.0121 40.2638C53.0574 40.1761 53.0811 40.0788 53.0811 39.9801C53.0811 39.8813 53.0574 39.7841 53.0121 39.6964C52.9667 39.6087 52.9009 39.5332 52.8203 39.4762Z" fill="white"/>
                        </svg>
                    </span>
                </a>
            </figure>
        </div>
    `;const followUserTemplate=(username)=>`
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:w-6 md:h-6 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
        </svg>
        <span>
            You are now following ${username}
        </span>
    `;const unfollowUserTemplate=(username)=>`
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 md:w-6 md:h-6 text-primary-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6" />
        </svg>
        <span>
            You are no longer following ${username}
        </span>
    `;function setImageUrlHash(){if(galleryOptions.galleryTypeParam){window.location.hash=`i=${currentImageId}&t=${galleryOptions.galleryTypeParam}`;return;}
window.location.hash=`i=${currentImageId}`;}
function setVideoUrlHash(){window.location.hash=`v=${currentImageId}`;}
function setChainUrlHash(){window.location.hash=`c=${currentImageId}`;}
function getHashValue(key){const matches=window.location.hash.match(new RegExp(`${key}=([^&]*)`));return matches?matches[1]:null;}
function getPrefixValue(key){const matches=window.location.hash.match(new RegExp(`${key}=([0-9]*)`));return matches?matches[1]:null;}
function getTouches(evt){return evt.touches;}
function initialize(element,options){elem=element;galleryOptions=Object.assign(galleryOptions,options);bind();}
function loadImageFromHash(){const videoId=getHashValue('v');const imageId=getHashValue('i');const chainId=getHashValue('c');const galleryType=getPrefixValue('t');if(!imageId&&!videoId&&!chainId)return false;if(videoId){const anchorEl=document.querySelector(`${elem} a[data-image-id="${videoId}"]`);if(!anchorEl)return false;setVideoFromElement(anchorEl);HappycowModal.show('#modal-gallery');HappycowAnalytics.gtagEventCheck('#web-listing','listing_image_carousel',{trigger:'gallery',});return;}
if(chainId){const anchorEl=document.querySelector(`${elem} a[data-image-id="${chainId}"]`);if(!anchorEl)return false;setChainImageFromElement(anchorEl);HappycowModal.show('#modal-gallery');HappycowAnalytics.gtagEventCheck('#web-listing','listing_image_carousel',{trigger:'gallery',});return;}
if(galleryType&&galleryType!==galleryOptions.galleryTypeParam)return false;currentImageId=imageId;const anchorEl=document.querySelector(`${elem} a[data-image-id="${currentImageId}"]`);if(!anchorEl)return false;HappycowModal.show('#modal-gallery');const link=anchorEl.getAttribute('href');document.querySelector('.modal-gallery').setAttribute('data-element',elem);const reference=anchorEl.closest('.venue-list-images');if(!reference)return false;referenceEl=reference;const index=anchorEl.dataset.index;const last=anchorEl.dataset.last;getImageData(index,last,link);HappycowAnalytics.gtagEventCheck('#web-listing','listing_image_carousel',{trigger:'gallery',});}
function setVideoFromElement(anchorEl){currentImageId=anchorEl.dataset.imageId;const modalGallery=document.querySelector('.modal-gallery');document.querySelectorAll('.item-review').forEach((item)=>item.classList.add('hidden'));document.querySelector('.modal-gallery .gallery-content').classList.add('video-content');const index=anchorEl.dataset.index;const last=anchorEl.dataset.last;const videoSrc=anchorEl.dataset.video;modalGallery.setAttribute('data-element',elem);const reference=anchorEl.closest('.venue-list-images');if(!reference){return;}
referenceEl=reference;getVideoData(index,last,videoSrc);}
function setChainImageFromElement(anchorEl){const chainSrc=anchorEl.getAttribute('href');const reference=anchorEl.closest('.venue-list-images');currentImageId=anchorEl.dataset.imageId;document.querySelector('.modal-gallery').setAttribute('data-element',elem);if(!reference){return;}
referenceEl=reference;getChainData(chainSrc);}
function setControls(anchorEl){const modal=document.querySelector(`.modal-gallery[data-element="${elem}"]`);if(!modal)return;const index=anchorEl.dataset.index;const last=anchorEl.dataset.last;if(index==last){modal.querySelector('.gallery-controls').classList.add('invisible');return;}
if(index==1){modal.querySelector('.gallery-controls .control-left').classList.add('carousel-control-disabled');}
if(index>=last){modal.querySelector('.gallery-controls .control-right').classList.add('carousel-control-disabled');}}
function removeImage(imageEl){const imageId=imageEl.dataset.id;const id=imageEl.dataset.venueId;const formData=new FormData();formData.append(csrf.name,csrf.value);HappycowAlert.loading();post(`/ajax/venues/${id}/image/${imageId}/delete`,formData).then(function(data){if(data.success){HappycowModal.close('#modal-gallery');window.location.reload();return;}
HappycowToastr.error('Looks like this image no longer can be deleted. Contact us if you wish to delete it.');}).catch(function(){HappycowToastr.error('Something went wrong. Please try again later or contact us.');}).finally(function(){HappycowAlert.terminate();});}
function bind(){window.addEventListener('resize',debounce(()=>{if(document.querySelector('.modal-gallery.show')){setViewport('--device-screen-height');}},200));addLiveEventListener('hidden.hc.modal','#authentication-modal',(e)=>{e.stopImmediatePropagation();if(document.querySelector('.modal-gallery').classList.contains('show')){deleteElement('.modal-backdrop');appendContent('body',"<div class='modal-backdrop in fixed inset-0 bg-black opacity-30 z-40'></div>");}});addLiveEventListener('loaded.hc.gallery',`.modal-gallery[data-element="${elem}"]`,function(e){e.stopImmediatePropagation();setViewport('--device-screen-height');setIndicator();initMiniGallery();});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .carousel-control-prev`,function(e){e.stopPropagation();HappycowCarousel.prev('#mini-gallery-carousel');});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .carousel-control-next`,function(e){e.stopPropagation();HappycowCarousel.next('#mini-gallery-carousel',{behavior:'smooth',block:'nearest',inline:'start'});});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .delete-image`,function(e){e.preventDefault();const self=this;HappycowAlert.alert({title:'Delete image',message:'Are you sure?',modalSmall:true,buttons:{cancel:true,confirm:{text:'Confirm',value:true,closeModal:false,},},}).then(function(value){if(value){removeImage(self);}});});addLiveEventListener('input',`.modal-gallery[data-element="${elem}"] textarea`,function(e){autoResize(this);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #facebook-share`,function(e){e.preventDefault();clickObserver.observe('gallery-facebook-share');FB.ui({method:'share_open_graph',action_type:'og.likes',action_properties:JSON.stringify({object:{'og:url':window.location.href,},}),},function(response){});});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #twitter-share`,function(e){e.preventDefault();clickObserver.observe('gallery-twitter-share');const link='https://twitter.com/intent/tweet';const params={text:`Photo of ${document.querySelector('.profile-desc').textContent.trim()}, ${document
                    .querySelector('.image-description-text')
                    .textContent.trim()} by ${document.querySelector('.profile-name a').textContent}`,url:window.location.href,hastag:'HappyCow',via:'HappyCow',original_referer:'https://www.happycow.net',};const urlParams=new URLSearchParams(params);const twitterShare=window.open(`${link}?${urlParams.toString()}`,'Twitter share','height=450,width=650');if(window.focus){twitterShare.focus();}});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #email-share`,function(e){e.preventDefault();clickObserver.observe('gallery-email-share');const subject=`Photo of ${document.querySelector('.profile-desc').textContent.trim()}, ${document
                .querySelector('.image-description-text')
                .textContent.trim()} by ${document.querySelector('.profile-name a').textContent.trim()}`;window.location.href=`mailto:example@example.com?subject=${subject}&body=Check out this image ${window.location.href}`;});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .btn-description-dismiss`,function(e){const parent=this.closest('.review-desc');parent.querySelector('p').classList.remove('hidden');parent.querySelector('.edit-description-content').classList.add('hidden');const topParent=parent.parentElement;if(topParent.tagName==='FIGCAPTION'){topParent.style.opacity='';parent.style.height='auto';}});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .btn-description-save:not([hidden])`,function(e){e.preventDefault();const description=document.querySelector('.edit-description-content:not(.hidden) .image-description-edit-textarea').value;if(description.length==0){HappycowToastr.error('Please write something first');return;}
HappycowCommon.authCheck().then(function(data){if(!data){HappycowModal.show('#authentication-modal','Please login to update description.',false);return;}
updateDescription(description);}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again a bit later.');});});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .image-description-edit`,function(e){e.preventDefault();const parent=this.closest('.review-desc');parent.querySelector('p').classList.add('hidden');parent.querySelector('.edit-description-content').classList.remove('hidden');topParent=parent.parentElement;checkDescriptionLimit(document.querySelector('.edit-description-content:not(.hidden) .image-description-edit-textarea'));if(topParent.tagName==='FIGCAPTION'){topParent.style.opacity=1;topParent.style.zIndex=20;parent.style.height='auto';parent.style.maxHeight='none';}});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #copy-link`,function(e){e.preventDefault();clickObserver.observe('gallery-copy-link');copyTextToClipboard(window.location.href);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .btn-comment-edit-save`,function(e){e.preventDefault();const parent=this.closest('.comment');parent.querySelectorAll('.text-edit').forEach((item)=>item.classList.add('hidden'));parent.querySelectorAll('.non-edit').forEach((item)=>item.classList.remove('hidden'));const commentId=this.dataset.commentId;const commentText=parent.querySelector('textarea').value;updateComment(commentId,commentText);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .btn-comment-edit-cancel`,function(e){e.preventDefault();const commentDetails=this.closest('.comment');const commentEditLimit=commentDetails.querySelector('.comment-edit-limit');commentEditLimit.classList.add('hidden');commentDetails.querySelectorAll('.text-edit').forEach((item)=>item.classList.add('hidden'));commentDetails.querySelectorAll('.non-edit').forEach((item)=>item.classList.remove('hidden'));});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .btn-comment-edit`,function(e){e.preventDefault();hideEditComment();const parent=this.closest('.comment');parent.querySelectorAll('.text-edit').forEach((item)=>item.classList.remove('hidden'));parent.querySelectorAll('.non-edit').forEach((item)=>item.classList.add('hidden'));const commentId=this.dataset.commentId;if(!document.querySelector('.form-new-comment').classList.contains('hidden')){document.querySelector('.form-new-comment').classList.add('hidden');}
autoResize(parent.querySelector('textarea'));checkEditLimit(parent.querySelector('.comment-text-edit'),commentId);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .btn-comment-delete`,function(e){const commentId=this.dataset.commentId;HappycowAlert.alert({title:'Delete Comment',message:'Are you sure?',modalSmall:true,buttons:{cancel:true,confirm:{closeModal:true,value:true,},},}).then(function(value){if(value){deleteComment(commentId);}});});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .view-more-comments`,function(e){e.preventDefault();const nextPage=this.dataset.nextPage;getComments(nextPage);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .gallery-controls .control-left`,function(e){e.preventDefault();previous(elem);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .gallery-controls .control-right`,function(e){e.preventDefault();next(elem);HappycowAnalytics.gtagEventCheck('#web-listing','listing_image_carousel',{trigger:'carousel_next',});HappycowAnalytics.gtagEventCheck('#web-listingImages','listing_image_carousel',{trigger:'carousel_next',});});addLiveEventListener('touchmove',`.modal-gallery[data-element="${elem}"] .item-overlay`,function(evt){if(evt.touches.length>1){return false;}
if(xDown&&yDown){const xUp=evt.touches[0].clientX;const yUp=evt.touches[0].clientY;const xDiff=xDown-xUp;const yDiff=yDown-yUp;xDown=null;yDown=null;if(Math.abs(xDiff)>Math.abs(yDiff)){if(xDiff>0){next();return;}
previous();}}});addLiveEventListener('click','#modal-gallery [data-release="modal"]',function(e){e.stopImmediatePropagation();HappycowModal.close('#modal-gallery');});addLiveEventListener('hidden.hc.modal','#modal-gallery',function(e){e.stopImmediatePropagation();if(document.querySelector('#modal-gallery .video-content')){deleteElement('.modal-gallery .item-video');}
if(e.target.classList.contains('modal-gallery-fullscreen')){toggleFullScreen();}
if(e.target.classList.contains('modal-mini-gallery')){e.target.classList.remove('modal-mini-gallery');}
window.history.pushState('',document.title,window.location.pathname+window.location.search);});addLiveEventListener('shown.hc.modal','#modal-gallery',function(e){HappycowCommon.setObserver('#modal-gallery');});addLiveEventListener('touchstart',`.modal-gallery[data-element="${elem}"]`,function(evt){xDown=getTouches(evt)[0].clientX;yDown=getTouches(evt)[0].clientY;});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .comment-link`,function(e){e.preventDefault();HappycowCommon.authCheck().then(function(data){if(!data){HappycowModal.show('#authentication-modal','Please login or register to comment',false);HappycowAnalytics.gtagEventCheck('#web-listing','auth_modal',{source:'listing_details',trigger:'engagement',});return;}
checkLimit(document.querySelector('#comment-message'));document.querySelector('.form-new-comment').classList.toggle('hidden');hideEditComment();}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again a bit later.');});});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #cancel-comment`,function(e){e.preventDefault();document.querySelector('.form-new-comment').classList.add('hidden');});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .like-link`,function(e){e.preventDefault();HappycowCommon.authCheck().then(function(data){if(!data){HappycowModal.show('#authentication-modal','Please login or register to comment',false);HappycowAnalytics.gtagEventCheck('#web-listing','auth_modal',{source:'listing_details',trigger:'engagement',});return;}
like();}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again a bit later.');});});addLiveEventListener('keydown',`.modal-gallery[data-element="${elem}"]`,function(e){if(document.activeElement.type==='textarea'||document.activeElement.type==='input'){return;}
if(e.key&&e.key.toUpperCase()==='ARROWRIGHT'){next(elem);}else if(e.key&&e.key.toUpperCase()==='ARROWLEFT'){previous(elem);}});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #send-comment`,function(e){e.preventDefault();const comment=e.target.closest('form').querySelector('#comment-message').value;if(comment.length==0){HappycowToastr.error('Please write something first');return;}
HappycowCommon.authCheck().then(function(data){if(!data){HappycowModal.show('#authentication-modal','Please login or register to comment',false);HappycowAnalytics.gtagEventCheck('#web-listing','auth_modal',{source:'listing_details',trigger:'engagement',});localStorageManager.setItem(`hcimagecomment-${currentImageId}`,comment);return;}
postComment(comment);}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again a bit later.');});});addLiveEventListener('keyup',`.modal-gallery[data-element="${elem}"] .image-description-edit-textarea`,function(e){checkDescriptionLimit(this);});addLiveEventListener('keyup',`.modal-gallery[data-element="${elem}"] #comment-message`,function(e){checkLimit(this);});addLiveEventListener('keyup',`.modal-gallery[data-element="${elem}"] .comment-text-edit`,function(){const commentId=this.closest('.comment').querySelector('.btn-comment-edit').dataset.commentId;checkEditLimit(this,commentId);});addLiveEventListener('click','.more-images-link',function(e){e.stopImmediatePropagation();});addLiveEventListener('click',`${elem} .venue-list-images`,function(e){e.stopPropagation();e.preventDefault();const figcaption=e.target.closest('figcaption');if(figcaption)return;const anchorEl=this.querySelector('a');if(!anchorEl)return;if(anchorEl.dataset.type==='video'){setVideoFromElement(anchorEl);HappycowModal.show('#modal-gallery');return;}
if(anchorEl.dataset.type==='chain'){setChainImageFromElement(anchorEl);HappycowModal.show('#modal-gallery');return;}
currentImageId=anchorEl.dataset.imageId;const modalGallery=document.querySelector('.modal-gallery');const link=anchorEl.getAttribute('href');modalGallery.setAttribute('data-element',elem);referenceEl=this;HappycowModal.show('#modal-gallery');const index=anchorEl.dataset.index;const last=anchorEl.dataset.last;setControls(anchorEl);getImageData(index,last,link);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] #mini-gallery-carousel .carousel-item`,function(e){e.stopPropagation();e.preventDefault();const anchorEl=this.querySelector('a');if(!anchorEl)return;if(anchorEl.dataset.type==='video'){setVideo(anchorEl);HappycowModal.show('#modal-gallery');return;}
currentImageId=anchorEl.dataset.imageId;const modalGallery=document.querySelector('.modal-gallery');const link=anchorEl.getAttribute('href');modalGallery.setAttribute('data-element',elem);referenceEl=document.querySelector(elem);HappycowModal.show('#modal-gallery');const index=anchorEl.dataset.index;const last=anchorEl.dataset.last;setControls(anchorEl);getImageData(index,last,link);});addLiveEventListener('click',`.modal-gallery[data-element="${elem}"] .content-item`,function(e){e.stopPropagation();});window.addEventListener('click',function(e){if(e.target.closest('#modal-alert-exit')||e.target.closest('.modal-login')||e.target.classList.contains('modal-backdrop-exit')){return false;}
if(e.target.classList.contains('btn-modal-alert')||e.target.closest('.modal-login')){return false;}
if(document.querySelector('.modal-open .modal-gallery')){HappycowModal.close('#modal-gallery');}});addLiveEventListener('click','#comment-gallery',(e)=>{if(!e.target.classList.contains('dropdown-toggle')){HappycowDropdown.closeOpened();}});addLiveEventListener('click','.option-expand',function(e){e.stopImmediatePropagation();toggleFullScreen();});document.addEventListener('keyup',function(e){if(e.key&&e.key.toUpperCase()==='ESCAPE'&&document.querySelector('.modal-gallery-fullscreen')){toggleFullScreen();}});addLiveEventListener('click','.gallery-btn-follow',function(e){e.stopImmediatePropagation();HappycowCommon.authCheck().then(function(data){if(!data){HappycowModal.show('#authentication-modal','Please login to follow user.',false);return;}
const username=document.querySelector('#comment-gallery').getAttribute('data-username');const userId=document.querySelector('#comment-gallery').getAttribute('data-user-id');if(e.target.classList.contains('active')){galleryUnfollowUser(e.target,userId,username);return;}
galleryFollowUser(e.target,userId,username);}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again a bit later.');});});}
function galleryFollowUser(btn,userId,username){const formData=new FormData();formData.append(csrf.name,csrf.value);post(`/ajax/member/follow/${userId}`,formData,{target:false}).then(function(result){if(result.success){btn.classList.add('active');btn.innerHTML='Following';HappycowToastr.basic('',followUserTemplate(username));return;}
HappycowToastr.error(result.message||'Something went wrong. Please try again later or contact us.');}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again later or contact us.');});}
function galleryUnfollowUser(btn,userId,username){const formData=new FormData();formData.append(csrf.name,csrf.value);post(`/ajax/member/unfollow/${userId}`,formData,{target:false}).then(function(result){if(result.success){btn.classList.remove('active');btn.innerHTML='Follow';HappycowToastr.basic('',unfollowUserTemplate(username));return;}
HappycowToastr.error(result.message||'Something went wrong. Please try again later or contact us.');}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again later or contact us.');});}
function toggleFullScreen(){const modalGallery=document.querySelector('.modal-gallery');modalGallery.classList.toggle('modal-gallery-fullscreen');if(modalGallery.querySelector('.carousel-controls')){HappycowCarousel.setControlVisibility(document.querySelector('.modal-gallery #mini-gallery-carousel'),'carousel-control-disabled');}}
function autoResize(el){const text=el.value;el.style.height='auto !important;';if(el.scrollHeight>48){el.style.height=(text?el.scrollHeight:'48')+'px !important;';}}
function fallbackCopyTextToClipboard(text){const textArea=document.createElement('textarea');textArea.value=text;document.body.appendChild(textArea);textArea.focus();textArea.select();try{const successful=document.execCommand('copy');const msg=successful?HappycowToastr.basic('',shareTemplate):window.prompt('Copy to clipboard: Ctrl+C, Enter',text);}catch(err){window.prompt('Copy to clipboard: Ctrl+C, Enter',text);}
document.body.removeChild(textArea);}
function copyTextToClipboard(text){if(!navigator.clipboard){fallbackCopyTextToClipboard(text);return;}
navigator.clipboard.writeText(text).then(function(){HappycowToastr.basic('',shareTemplate);},function(err){window.prompt('Copy to clipboard: Ctrl+C, Enter',text);});}
function next(element){const image=referenceEl.closest('.gallery').querySelector(`a[data-image-id="${currentImageId}"]`);if(!image)return;const index=image.dataset.index;const last=image.dataset.last;let nextIndex=parseInt(index,10)+1;if(nextIndex>last){nextIndex=1;return;}
const nextElement=referenceEl.closest('.gallery').querySelector(`a[data-index="${nextIndex}"]`);if(nextElement.dataset.type==='video'){setVideo(nextElement);return;}
setImage(nextElement);}
function previous(element){const image=referenceEl.closest('.gallery').querySelector(`a[data-image-id="${currentImageId}"]`);if(!image)return;const index=image.dataset.index;const last=image.dataset.last;let nextIndex=parseInt(index,10)-1;if(nextIndex<=0){nextIndex=last;return;}
const nextElement=referenceEl.closest('.gallery').querySelector(`a[data-index="${nextIndex}"]`);if(nextElement.dataset.type==='video'){setVideo(nextElement);return;}
setImage(nextElement);}
function setVideo(nextElement){const videoSrc=nextElement.dataset.video;const index=nextElement.dataset.index;const last=nextElement.dataset.last;currentImageId=nextElement.dataset.imageId;getVideoData(index,last,videoSrc);}
function setImage(nextElement){document.querySelector('.gallery-content .item-overlay').style.minHeight='200px';const link=nextElement.getAttribute('href');currentImageId=nextElement.dataset.imageId;const index=nextElement.dataset.index;const last=nextElement.dataset.last;getImageData(index,last,link);}
function getChainData(src){if(controller)controller.abort();controller=new AbortController();const signal=controller.signal;get('/ajax/views/chain',{signal:signal}).then(function(d){setChainUrlHash();emptyElement('.modal-gallery');appendContent('.modal-gallery',d.data);document.querySelector('.content-item img.item-image').setAttribute('src',src);setIndicator();setTimeout(function(){document.querySelector('.modal-gallery').focus();},500);}).catch(function(e){if(e.name!=='AbortError'){HappycowToastr.error("We're not able to load the image. Please try again.");}}).finally(function(){controller=null;});}
function getVideoData(index,last,videoSrc){if(controller)controller.abort();controller=new AbortController();const signal=controller.signal;get(`/ajax/views/video?index=${index}&last=${last}`,{signal:signal}).then(function(d){setVideoUrlHash();emptyElement('.modal-gallery');appendContent('.modal-gallery',d.data);document.querySelector('.modal-gallery iframe').setAttribute('src',videoSrc);document.querySelector('.modal-gallery iframe').classList.remove('hidden');document.querySelector('.modal-gallery .gallery-content').classList.add('video-content');dispatchCustomEvent(document.querySelector('.modal-gallery'),'loaded.hc.gallery');setTimeout(function(){document.querySelector('.modal-gallery').focus();},500);}).catch(function(e){if(e.name!=='AbortError'){HappycowToastr.error("We're not able to load the image. Please try again.");}}).finally(function(){controller=null;});}
function getImageData(index,last,link){if(controller)controller.abort();controller=new AbortController();const signal=controller.signal;if(!currentImageId){document.querySelector('.gallery-content').classList.add('video-content');document.querySelectorAll('.item-review').forEach((item)=>item.classList.add('hidden'));dispatchCustomEvent(document.querySelector('.modal-gallery'),'loaded.hc.gallery');return;}
get(`/ajax/views/image/${currentImageId}?index=${index}&last=${last}`,{signal:signal}).then(function(d){setImageUrlHash();emptyElement('.modal-gallery');appendContent('.modal-gallery',d.data);document.querySelector('.content-item img.item-image').setAttribute('src',link);const savedComment=localStorageManager.getItem(`hcimagecomment-${currentImageId}`);document.querySelector('#comment-message').textContent=savedComment;dispatchCustomEvent(document.querySelector('.modal-gallery'),'loaded.hc.gallery');setTimeout(function(){document.querySelector('.modal-gallery').focus();},500);}).catch(function(e){if(e.name!=='AbortError'){HappycowToastr.error("We're not able to load the image. Please try again.");}}).finally(function(){controller=null;});}
function getComments(page){page=page>0?parseInt(page,10):1;if(controller)controller.abort();controller=new AbortController();const signal=controller.signal;get(`/ajax/views/image/${currentImageId}/comments?page=${page}`,{signal:signal}).then(function(d){if(page==1){emptyElement('.review-comments-content');if(d.data){appendContent('.review-comments-content',d.data);}
return;}
document.querySelector('.comment-info').remove();document.querySelector('.review-comments-content .comment:last-child').after(d.data);setTimeout(function(){document.querySelector('#comment-message').focus();},500);}).catch(function(e){if(e.name!=='AbortError'){HappycowToastr.error("Sorry, we're not able to get the image comments. Please try again.");}}).finally(function(){controller=null;});}
function postComment(comment){const formData=new FormData();formData.append(csrf.name,csrf.value);formData.append('comment',comment);post(`/ajax/image/${currentImageId}/comment/add`,formData).then(function(d){if(d.success){const commentCounter=document.querySelector('.comments-counter');commentCounter.innerHTML=parseInt(commentCounter.innerHTML,10)+1;document.querySelector('#comment-message').setAttribute('style','');document.querySelector('#comment-limit').classList.remove('text-red-500');document.querySelector('#comment-limit-value').textContent=textMax;HappycowToastr.success('Comment successfully posted');document.querySelector('#comment-message').value='';document.querySelector('.form-new-comment').classList.toggle('hidden');localStorageManager.removeItem(`hcimagecomment-${currentImageId}`);getComments(1);return;}
HappycowToastr.error(d.message);}).catch(function(e){HappycowToastr.error("Sorry, we're not able to save your comment. Please try again.");});}
function updateDescription(description){const formData=new FormData();formData.append(csrf.name,csrf.value);formData.append('description',description);post(`/ajax/image/${currentImageId}/description/update`,formData).then(function(d){if(d.success){document.querySelectorAll('.image-description-text').forEach((item)=>(item.textContent=d.description));document.querySelectorAll('.image-description-edit-textarea').forEach((item)=>(item.value=d.description));document.querySelector('.edit-description-content:not(.hidden) .btn-description-dismiss').click();HappycowToastr.success('Description updated');return;}
HappycowToastr.error(d.message);}).catch(function(e){HappycowToastr.error("Sorry, we're not able to save your changes. Please try again.");});}
function updateComment(commentId,commentText){const formData=new FormData();document.querySelector(`[data-comment-id="${commentId}"]:first-child`).closest('.comment').querySelector('.comment-edit-limit').classList.add('hidden');formData.append(csrf.name,csrf.value);formData.append('comment',commentText);post(`/ajax/image/comment/${commentId}/update`,formData).then(function(d){if(d.success){document.querySelector(`[data-comment-id="${commentId}"]:first-child`).closest('.comment').querySelector('.comment-text').innerHTML=d.comment;HappycowToastr.success('Comment successfully updated');return;}
HappycowToastr.error(d.message);}).catch(function(e){HappycowToastr.error("Sorry, we're not able to update your comment. Please try again.");});}
function deleteComment(commentId){const formData=new FormData();formData.append(csrf.name,csrf.value);post(`/ajax/image/comment/${commentId}/delete`,formData).then(function(d){if(d.success){const commentCounter=document.querySelector('.comments-counter');commentCounter.innerHTML=parseInt(commentCounter.innerHTML,10)-1;HappycowToastr.success('Comment successfully deleted');getComments(1);return;}
HappycowToastr.error(d.message);}).catch(function(e){HappycowToastr.error("Sorry, we're not able to delete your comment. Please try again.");});}
function like(){get(`/ajax/views/image/${currentImageId}/like`).then(function(d){if(d.success){setLikes(d);const likeIcon=document.querySelector('.like-icon svg');const likeBtn=document.querySelector('.like-link svg');if(d.message==1){likeIcon.setAttribute('stroke','#F43D53');likeIcon.querySelector('path').setAttribute('fill','#F43D53');likeBtn.setAttribute('stroke','#F43D53');likeBtn.querySelector('path').setAttribute('fill','#F43D53');return;}
likeIcon.querySelector('path').setAttribute('fill','none');likeIcon.setAttribute('stroke','currentColor');likeBtn.querySelector('path').setAttribute('fill','none');likeBtn.setAttribute('stroke','currentColor');return;}
HappycowToastr.error(d.message);}).catch(function(e){HappycowToastr.error("Sorry, we're not able to handle your request. Please try again.");});}
function setLikes(data){emptyElement('.review-likes');if(data.data){appendContent('.review-likes',data.data);}}
function checkEditLimit(element,commentId){const commentDetails=document.querySelector(`[data-comment-id="${commentId}"]:first-child`).closest('.comment');const commentEditLimit=commentDetails.querySelector('.comment-edit-limit');if(commentEditLimit.length==0){return;}
commentEditLimit.classList.remove('hidden');const text=element.value;let remaining=textMax-text.length;if(remaining<=0){remaining=0;commentEditLimit.classList.add('text-red-500');element.value=text.substring(0,textMax);commentDetails.querySelector('.comment-edit-limit-value').textContent=remaining;return;}
commentEditLimit.classList.remove('text-red-500');commentDetails.querySelector('.comment-edit-limit-value').textContent=remaining;}
function checkLimit(element){const text=element.value;let remaining=textMax-text.length;if(remaining<=0){remaining=0;document.querySelector('#comment-limit').classList.add('text-red-500');element.value=text.substring(0,textMax);document.querySelector('#comment-limit-value').textContent=remaining;return;}
document.querySelector('#comment-limit').classList.remove('text-red-500');document.querySelector('#comment-limit-value').textContent=remaining;}
function checkDescriptionLimit(element){const text=element.value;let remaining=textMax-text.length;if(remaining<=0){remaining=0;document.querySelectorAll('.image-description-limit').forEach((item)=>item.classList.add('text-red-500'));element.value=text.substring(0,textMax);document.querySelectorAll('.image-description-value').forEach((item)=>(item.textContent=remaining));return;}
document.querySelectorAll('.image-description-limit').forEach((item)=>item.classList.remove('text-red-500'));document.querySelectorAll('.image-description-value').forEach((item)=>(item.textContent=remaining));}
function setIndicator(){const image=referenceEl.closest(`${elem}.gallery`).querySelector(`a[data-image-id="${currentImageId}"]`);if(!image)return;const currentPosition=image.dataset.index;const lastPosition=image.dataset.last;document.querySelector('#modal-gallery .image-indicator').innerHTML=currentPosition;document.querySelector('#modal-gallery .images-count').innerHTML=lastPosition;}
function initMiniGallery(){if(!galleryOptions.miniGallery)return;const allItems=document.querySelectorAll(`${elem} .venue-list-image-link`);if(allItems.length<2)return;document.querySelector(`.modal-gallery[data-element="${elem}"]`).classList.add('modal-mini-gallery');emptyElement('.mini-gallery-carousel .carousel-scroll');allItems.forEach((item)=>{if(item.getAttribute('data-type')==='video'){appendContent('.mini-gallery-carousel .carousel-scroll',miniGalleryVideoTemplate(item.getAttribute('data-video'),item.getAttribute('data-image-id'),item.getAttribute('data-index'),item.getAttribute('data-last'),item.getAttribute('data-video-thumbnail'),item.getAttribute('alt')));return;}
appendContent('.mini-gallery-carousel .carousel-scroll',miniGalleryImageTemplate(item.getAttribute('href'),item.getAttribute('data-image-id'),item.getAttribute('data-index'),item.getAttribute('data-last'),item.getAttribute('data-image-thumbnail'),item.getAttribute('title')));});HappycowCarousel.init(`.modal-gallery[data-element="${elem}"] .mini-gallery-carousel`,'carousel-control-disabled');HappycowCarousel.setScrollToActiveItem('#mini-gallery-carousel',{block:'nearest',inline:'center',});}
function hideEditComment(){document.querySelectorAll('.comment-current-user').forEach((item)=>{if(!item.querySelector('.comment-text-edit').classList.contains('hidden')){item.querySelectorAll('.text-edit').forEach((commentItem)=>commentItem.classList.add('hidden'));item.querySelector('.comment-edit-limit').classList.add('hidden');item.querySelectorAll('.non-edit').forEach((commentItem)=>commentItem.classList.remove('hidden'));}});}
return{initialize:function(element,options=galleryOptions){initialize(element,options);return this;},loadImageFromHash:function(){loadImageFromHash();return this;},};};;
var HappycowUrlUtils=function(){const detectURLRegex=/(https?:\/\/[^\s{}[\]"'`~\\<>]+)|(www\.[^\s{}[\]"'`~\\<>]+)/g;const anchorTemplate=(url)=>`<a href="${url}" target="_blank" rel="nofollow" class="break-words text-primary-500 transition-color hover:text-primary-300 duration-200">${url}</a>`;function setHistoryParams(params,type,name,divider){if(window.history&&window.history.pushState){const searchParams=new URLSearchParams(params);const urlParams=searchParams.toString();let historyUrl=window.location.pathname;if(urlParams.length>0){historyUrl=window.location.pathname+divider+searchParams.toString();}
window.history.pushState({type:type},name,historyUrl);}}
function setHistoryUrl(url,type,name){let state={type:type};if(typeof type==='object'&&type!==null){state=type;}
if(window.history&&window.history.pushState){window.history.pushState(state,name,url);}}
function back(){if(window.history){window.history.back();}}
function getUrlParameter(sParam){const sPageURL=decodeURIComponent(window.location.search.substring(1));const searchParams=new URLSearchParams(sPageURL);if(searchParams.has(sParam)){return searchParams.get(sParam);}}
function checkUrlPath(sPath){if(window.location.pathname.match(sPath)){return true;}
return false;}
function detectURLs(text,replaceNewLine=false){if(!text){return false;}
const state={validURLs:[],allowURLs:[],};return new Promise((resolve,reject)=>{const allURLs=text.split(detectURLRegex).filter((item)=>detectURLRegex.test(item));let formattedText=text;if(allURLs.length<1){return resolve(text);}
allURLs.forEach((item)=>{const isValidURL=HappycowValidator.validateURL(item);if(isValidURL.valid&&isValidURL.trustedURL){state.allowURLs.push(isValidURL);return;}
if(isValidURL.valid){state.validURLs.push(isValidURL);}});state.allowURLs=state.allowURLs.filter((url,index,arr)=>arr.findIndex((url2)=>url2.oldURL===url.oldURL)===index);state.validURLs=state.validURLs.filter((url,index,arr)=>arr.findIndex((url2)=>url2.href===url.href)===index);const encodeURLs=state.validURLs.map((item)=>`urls[]=${encodeURIComponent(item.href)}`);const encodeURLText=encodeURLs.join('&');if(state.allowURLs.length>0){formattedText=formatText(text,state.allowURLs);if(state.validURLs.length<1){if(replaceNewLine){const formatNewLine=formattedText.replace(/(\r\n|\r|\n)/g,' <br> ');return resolve(formatNewLine);}
return resolve(formattedText);}}
get(`/ajax/url/check?${encodeURLText}`,{target:false}).then((res)=>{if(res.success&&res.message&&res.message.length>0){res.message.forEach((item)=>{formattedText=formatText(formattedText,state.validURLs,item);});if(replaceNewLine){const formatNewLine=formattedText.replace(/(\r\n|\r|\n)/g,' <br> ');return resolve(formatNewLine);}
return resolve(formattedText);}
if(res.success){return resolve(text);}
return reject('Something went wrong. Please try again later or contact us.');}).catch((err)=>{return reject(err||'Something went wrong. Please try again later or contact us.');});});}
function formatText(text,URLs,validURL=null){const replaceTextToURL=text.replace(detectURLRegex,(url)=>{let anchor=null;for(const item of URLs){if(item.oldURL===url&&!validURL){anchor=anchorTemplate(item.cleanURL);return anchor;}
if(item.oldURL===url&&item.href===validURL){anchor=anchorTemplate(item.cleanURL);return anchor;}}
return url;});return replaceTextToURL;}
return{setHistory:function(params,type,name,divider){divider=typeof divider!=='undefined'?divider:'?';setHistoryParams(params,type,name,divider);},getUrlParameter:getUrlParameter,setHistoryUrl:setHistoryUrl,back:back,detectURLs:detectURLs,checkUrlPath:checkUrlPath,};};;
var HappycowReviews=function(){function init(){bind();}
function bind(){pubSub.subscribe('userData',function(data){if(data.username){document.querySelectorAll('.comment-form .title-username').forEach((item)=>{item.textContent=data.username;});if(data.avatar){document.querySelectorAll('.comment-form img').forEach((item)=>{item.src=data.avatar;item.dataset.src=data.avatar;});}
const venueId=document.querySelector('.data-element').dataset.id;const reviewBtns=document.querySelectorAll('.add-review-btn-label');if(reviewBtns){get(`/ajax/user-review-data/${venueId}`,{target:false}).then((result)=>{if(result&&result.success&&result.success===true){if(result.data.reviewCount>0){reviewBtns.forEach((btn)=>{btn.textContent='Edit Review';});}}});}
const commentHeader=document.querySelectorAll('.comment-body-header');if(commentHeader.length>0){commentHeader.forEach((item)=>{const reviewId=item.dataset.reviewId;if(reviewId==data.id){item.querySelector('.edit-review').classList.remove('hidden');}});}
const responses=document.querySelectorAll('.comment-reply');if(responses.length>0){responses.forEach((item)=>{const responseUserId=item.dataset.userId;if(responseUserId==data.id){item.querySelector('.modify-review-response').classList.remove('hidden');}});}}});if(window.innerWidth<768){const userReviews=document.querySelectorAll('p.user-review-text');userReviews.forEach(function(item){if(item.scrollHeight>item.clientHeight){item.parentElement.querySelector('.read-more-btn').classList.remove('hidden');}});const ownerComments=document.querySelectorAll('p.owner-comment-text');ownerComments.forEach(function(item){if(item.scrollHeight>item.clientHeight){item.parentElement.querySelector('.read-more-btn').classList.remove('hidden');}});addOnEventListener('click','.read-more-btn',function(e){e.preventDefault();this.parentElement.querySelector('.user-review-text,.owner-comment-text').classList.remove('line-clamp-review');this.remove();});}
addLiveEventListener('click','.comment-menu .comment-response',function(e){e.preventDefault();const commentItem=e.target.closest('.comment-item');commentItem.querySelector('.comment-body').classList.add('show-more');HappycowCommon.authCheck().then((data)=>{if(!data){HappycowModal.show('#authentication-modal','Please login or register to comment',false);HappycowAnalytics.gtagEventCheck('#web-listing','auth_modal',{source:'listing_details',trigger:'engagement',});return;}
commentItem.querySelector('.comment-body .comment-form').classList.toggle('hidden');commentItem.querySelector('.post-response-form').classList.toggle('hidden');}).catch((error)=>{HappycowToastr.error('Something went wrong. Please try again a bit later.');});});addLiveEventListener('click','.comment-reply .edit-response-form .btn-cancel',function(e){e.preventDefault();e.target.closest('.edit-response-form').classList.add('hidden');e.target.closest('.comment-reply').querySelector('.media-container').classList.remove('hidden');});addOnEventListener('click','.edit-review-response-btn',function(e){e.preventDefault();const commentReply=e.target.closest('.comment-reply');HappycowCommon.authCheck().then(function(data){if(!data){HappycowModal.show('#authentication-modal','Please login or register to edit comment',false);return;}
const responseEditor=commentReply.querySelector('.edit-response-form');responseEditor.classList.remove('hidden');commentReply.querySelector('.media-container').classList.add('hidden');}).catch(function(error){HappycowToastr.error('Something went wrong. Please try again a bit later.');});});HappycowForm.init('.edit-response-form');addOnEventListener('submit','.comment-reply .edit-response-form',function(e){e.preventDefault();const btnSubmit=e.target.querySelector('[type=submit]');btnSubmit.innerHTML=`
                Please wait..
                <svg class="animate-spin inline-flex h-3 w-3 -mt-1 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            `;btnSubmit.disabled=true;const reviewId=e.target.dataset.reviewId;const formData=new FormData();formData.append(csrf.name,csrf.value);formData.append('id',e.target.dataset.responseId);formData.append('response',e.target.querySelector('.response').value);post(`/ajax/reviews/${reviewId}/reply/update`,formData).then((d)=>{if(d.success){window.location.reload();return;}
btnSubmit.innerHTML='Save';btnSubmit.disabled=false;HappycowAlert.error(d.message,'If you think this is a mistake. Please contact us.');}).catch((error)=>{btnSubmit.innerHTML='Save';btnSubmit.disabled=false;HappycowAlert.error('Oops...',"Something went wrong! Please try again. Save your review and make sure you're logged in.");});});addOnEventListener('submit','.comment-reply .post-response-form',function(e){e.preventDefault();const btnSubmit=e.target.querySelector('[type=submit]');btnSubmit.innerHTML=`
                Please wait..
                <svg class="animate-spin inline-flex h-4 w-4 -mt-0.5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            `;btnSubmit.disabled=true;const reviewId=e.target.dataset.reviewId;const formData=new FormData();formData.append(csrf.name,csrf.value);formData.append('response',e.target.querySelector('.response').value);post(`/ajax/reviews/${reviewId}/reply/add`,formData).then(function(d){if(d.success){window.location.reload();return;}
btnSubmit.innerHTML='Save';btnSubmit.disabled=false;HappycowAlert.error(d.message,'If you think this is a mistake. Please contact us.');}).catch((error)=>{btnSubmit.innerHTML='Save';btnSubmit.disabled=false;HappycowAlert.error('Oops...','Something went wrong! Save your comment, and please try again.');}).finally(()=>{});});HappycowForm.init('.comment-reply form');addLiveEventListener('click','.delete-review-response-btn',(e)=>{HappycowAlert.alert({title:'Delete comment',message:'Are you sure you want to delete your comment?',buttons:{cancel:true,confirm:{text:'Yes',closeModal:true,value:true,},},}).then(function(value){if(value){const id=e.target.dataset.responseId;const formData=new FormData();formData.append(csrf.name,csrf.value);post(`/ajax/responses/${id}/delete`,formData).then((d)=>{if(d.success){window.location.reload();return;}
HappycowAlert.error(d.message,'If you think this is a mistake. Please contact us.');}).catch((error)=>{HappycowAlert.error('Oops...','Something went wrong! Save your comment, and please try again.');});}});});addOnEventListener('click','.share-review',function(e){e.preventDefault();const url=document.querySelector('.listing-container').dataset.url;const id=e.target.closest('.comment-item').id;const result=HappycowShare.template(encodeURIComponent(`${url}/${id}`));HappycowAlert.alert({title:'Share This',message:result,buttons:false,});});}
return{init:init,};};;
(function(window){var ua=navigator.userAgent;if(window.HTMLPictureElement&&((/ecko/).test(ua)&&ua.match(/rv\:(\d+)/)&&RegExp.$1<45)){addEventListener("resize",(function(){var timer;var dummySrc=document.createElement("source");var fixRespimg=function(img){var source,sizes;var picture=img.parentNode;if(picture.nodeName.toUpperCase()==="PICTURE"){source=dummySrc.cloneNode();picture.insertBefore(source,picture.firstElementChild);setTimeout(function(){picture.removeChild(source);});}else if(!img._pfLastSize||img.offsetWidth>img._pfLastSize){img._pfLastSize=img.offsetWidth;sizes=img.sizes;img.sizes+=",100vw";setTimeout(function(){img.sizes=sizes;});}};var findPictureImgs=function(){var i;var imgs=document.querySelectorAll("picture > img, img[srcset][sizes]");for(i=0;i<imgs.length;i++){fixRespimg(imgs[i]);}};var onResize=function(){clearTimeout(timer);timer=setTimeout(findPictureImgs,99);};var mq=window.matchMedia&&matchMedia("(orientation: landscape)");var init=function(){onResize();if(mq&&mq.addListener){mq.addListener(onResize);}};dummySrc.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(/^[c|i]|d$/.test(document.readyState||"")){init();}else{document.addEventListener("DOMContentLoaded",init);}
return onResize;})());}})(window);(function(window,document,undefined){"use strict";document.createElement("picture");var warn,eminpx,alwaysCheckWDescriptor,evalId;var pf={};var isSupportTestReady=false;var noop=function(){};var image=document.createElement("img");var getImgAttr=image.getAttribute;var setImgAttr=image.setAttribute;var removeImgAttr=image.removeAttribute;var docElem=document.documentElement;var types={};var cfg={algorithm:""};var srcAttr="data-pfsrc";var srcsetAttr=srcAttr+"set";var ua=navigator.userAgent;var supportAbort=(/rident/).test(ua)||((/ecko/).test(ua)&&ua.match(/rv\:(\d+)/)&&RegExp.$1>35);var curSrcProp="currentSrc";var regWDesc=/\s+\+?\d+(e\d+)?w/;var regSize=/(\([^)]+\))?\s*(.+)/;var setOptions=window.picturefillCFG;var baseStyle="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)";var fsCss="font-size:100%!important;";var isVwDirty=true;var cssCache={};var sizeLengthCache={};var DPR=window.devicePixelRatio;var units={px:1,"in":96};var anchor=document.createElement("a");var alreadyRun=false;var regexLeadingSpaces=/^[ \t\n\r\u000c]+/,regexLeadingCommasOrSpaces=/^[, \t\n\r\u000c]+/,regexLeadingNotSpaces=/^[^ \t\n\r\u000c]+/,regexTrailingCommas=/[,]+$/,regexNonNegativeInteger=/^\d+$/,regexFloatingPoint=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;var on=function(obj,evt,fn,capture){if(obj.addEventListener){obj.addEventListener(evt,fn,capture||false);}else if(obj.attachEvent){obj.attachEvent("on"+evt,fn);}};var memoize=function(fn){var cache={};return function(input){if(!(input in cache)){cache[input]=fn(input);}
return cache[input];};};function isSpace(c){return(c==="\u0020"||c==="\u0009"||c==="\u000A"||c==="\u000C"||c==="\u000D");}
var evalCSS=(function(){var regLength=/^([\d\.]+)(em|vw|px)$/;var replace=function(){var args=arguments,index=0,string=args[0];while(++index in args){string=string.replace(args[index],args[++index]);}
return string;};var buildStr=memoize(function(css){return"return "+replace((css||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/ig,"")+";";});return function(css,length){var parsedLength;if(!(css in cssCache)){cssCache[css]=false;if(length&&(parsedLength=css.match(regLength))){cssCache[css]=parsedLength[1]*units[parsedLength[2]];}else{try{cssCache[css]=new Function("e",buildStr(css))(units);}catch(e){}}}
return cssCache[css];};})();var setResolution=function(candidate,sizesattr){if(candidate.w){candidate.cWidth=pf.calcListLength(sizesattr||"100vw");candidate.res=candidate.w/candidate.cWidth;}else{candidate.res=candidate.d;}
return candidate;};var picturefill=function(opt){if(!isSupportTestReady){return;}
var elements,i,plen;var options=opt||{};if(options.elements&&options.elements.nodeType===1){if(options.elements.nodeName.toUpperCase()==="IMG"){options.elements=[options.elements];}else{options.context=options.elements;options.elements=null;}}
elements=options.elements||pf.qsa((options.context||document),(options.reevaluate||options.reselect)?pf.sel:pf.selShort);if((plen=elements.length)){pf.setupRun(options);alreadyRun=true;for(i=0;i<plen;i++){pf.fillImg(elements[i],options);}
pf.teardownRun(options);}};warn=(window.console&&console.warn)?function(message){console.warn(message);}:noop;if(!(curSrcProp in image)){curSrcProp="src";}
types["image/jpeg"]=true;types["image/gif"]=true;types["image/png"]=true;function detectTypeSupport(type,typeUri){var image=new window.Image();image.onerror=function(){types[type]=false;picturefill();};image.onload=function(){types[type]=image.width===1;picturefill();};image.src=typeUri;return"pending";}
types["image/svg+xml"]=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");function updateMetrics(){isVwDirty=false;DPR=window.devicePixelRatio;cssCache={};sizeLengthCache={};pf.DPR=DPR||1;units.width=Math.max(window.innerWidth||0,docElem.clientWidth);units.height=Math.max(window.innerHeight||0,docElem.clientHeight);units.vw=units.width/100;units.vh=units.height/100;evalId=[units.height,units.width,DPR].join("-");units.em=pf.getEmValue();units.rem=units.em;}
function chooseLowRes(lowerValue,higherValue,dprValue,isCached){var bonusFactor,tooMuch,bonus,meanDensity;if(cfg.algorithm==="saveData"){if(lowerValue>2.7){meanDensity=dprValue+1;}else{tooMuch=higherValue-dprValue;bonusFactor=Math.pow(lowerValue-0.6,1.5);bonus=tooMuch*bonusFactor;if(isCached){bonus+=0.1*bonusFactor;}
meanDensity=lowerValue+bonus;}}else{meanDensity=(dprValue>1)?Math.sqrt(lowerValue*higherValue):lowerValue;}
return meanDensity>dprValue;}
function applyBestCandidate(img){var srcSetCandidates;var matchingSet=pf.getSet(img);var evaluated=false;if(matchingSet!=="pending"){evaluated=evalId;if(matchingSet){srcSetCandidates=pf.setRes(matchingSet);pf.applySetCandidate(srcSetCandidates,img);}}
img[pf.ns].evaled=evaluated;}
function ascendingSort(a,b){return a.res-b.res;}
function setSrcToCur(img,src,set){var candidate;if(!set&&src){set=img[pf.ns].sets;set=set&&set[set.length-1];}
candidate=getCandidateForSrc(src,set);if(candidate){src=pf.makeUrl(src);img[pf.ns].curSrc=src;img[pf.ns].curCan=candidate;if(!candidate.res){setResolution(candidate,candidate.set.sizes);}}
return candidate;}
function getCandidateForSrc(src,set){var i,candidate,candidates;if(src&&set){candidates=pf.parseSet(set);src=pf.makeUrl(src);for(i=0;i<candidates.length;i++){if(src===pf.makeUrl(candidates[i].url)){candidate=candidates[i];break;}}}
return candidate;}
function getAllSourceElements(picture,candidates){var i,len,source,srcset;var sources=picture.getElementsByTagName("source");for(i=0,len=sources.length;i<len;i++){source=sources[i];source[pf.ns]=true;srcset=source.getAttribute("srcset");if(srcset){candidates.push({srcset:srcset,media:source.getAttribute("media"),type:source.getAttribute("type"),sizes:source.getAttribute("sizes")});}}}
function parseSrcset(input,set){function collectCharacters(regEx){var chars,match=regEx.exec(input.substring(pos));if(match){chars=match[0];pos+=chars.length;return chars;}}
var inputLength=input.length,url,descriptors,currentDescriptor,state,c,pos=0,candidates=[];function parseDescriptors(){var pError=false,w,d,h,i,candidate={},desc,lastChar,value,intVal,floatVal;for(i=0;i<descriptors.length;i++){desc=descriptors[i];lastChar=desc[desc.length-1];value=desc.substring(0,desc.length-1);intVal=parseInt(value,10);floatVal=parseFloat(value);if(regexNonNegativeInteger.test(value)&&(lastChar==="w")){if(w||d){pError=true;}
if(intVal===0){pError=true;}else{w=intVal;}}else if(regexFloatingPoint.test(value)&&(lastChar==="x")){if(w||d||h){pError=true;}
if(floatVal<0){pError=true;}else{d=floatVal;}}else if(regexNonNegativeInteger.test(value)&&(lastChar==="h")){if(h||d){pError=true;}
if(intVal===0){pError=true;}else{h=intVal;}}else{pError=true;}}
if(!pError){candidate.url=url;if(w){candidate.w=w;}
if(d){candidate.d=d;}
if(h){candidate.h=h;}
if(!h&&!d&&!w){candidate.d=1;}
if(candidate.d===1){set.has1x=true;}
candidate.set=set;candidates.push(candidate);}}
function tokenize(){collectCharacters(regexLeadingSpaces);currentDescriptor="";state="in descriptor";while(true){c=input.charAt(pos);if(state==="in descriptor"){if(isSpace(c)){if(currentDescriptor){descriptors.push(currentDescriptor);currentDescriptor="";state="after descriptor";}}else if(c===","){pos+=1;if(currentDescriptor){descriptors.push(currentDescriptor);}
parseDescriptors();return;}else if(c==="\u0028"){currentDescriptor=currentDescriptor+c;state="in parens";}else if(c===""){if(currentDescriptor){descriptors.push(currentDescriptor);}
parseDescriptors();return;}else{currentDescriptor=currentDescriptor+c;}}else if(state==="in parens"){if(c===")"){currentDescriptor=currentDescriptor+c;state="in descriptor";}else if(c===""){descriptors.push(currentDescriptor);parseDescriptors();return;}else{currentDescriptor=currentDescriptor+c;}}else if(state==="after descriptor"){if(isSpace(c)){}else if(c===""){parseDescriptors();return;}else{state="in descriptor";pos-=1;}}
pos+=1;}}
while(true){collectCharacters(regexLeadingCommasOrSpaces);if(pos>=inputLength){return candidates;}
url=collectCharacters(regexLeadingNotSpaces);descriptors=[];if(url.slice(-1)===","){url=url.replace(regexTrailingCommas,"");parseDescriptors();}else{tokenize();}}}
function parseSizes(strValue){var regexCssLengthWithUnits=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i;var regexCssCalc=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;var i;var unparsedSizesList;var unparsedSizesListLength;var unparsedSize;var lastComponentValue;var size;function parseComponentValues(str){var chrctr;var component="";var componentArray=[];var listArray=[];var parenDepth=0;var pos=0;var inComment=false;function pushComponent(){if(component){componentArray.push(component);component="";}}
function pushComponentArray(){if(componentArray[0]){listArray.push(componentArray);componentArray=[];}}
while(true){chrctr=str.charAt(pos);if(chrctr===""){pushComponent();pushComponentArray();return listArray;}else if(inComment){if((chrctr==="*")&&(str[pos+1]==="/")){inComment=false;pos+=2;pushComponent();continue;}else{pos+=1;continue;}}else if(isSpace(chrctr)){if((str.charAt(pos-1)&&isSpace(str.charAt(pos-1)))||!component){pos+=1;continue;}else if(parenDepth===0){pushComponent();pos+=1;continue;}else{chrctr=" ";}}else if(chrctr==="("){parenDepth+=1;}else if(chrctr===")"){parenDepth-=1;}else if(chrctr===","){pushComponent();pushComponentArray();pos+=1;continue;}else if((chrctr==="/")&&(str.charAt(pos+1)==="*")){inComment=true;pos+=2;continue;}
component=component+chrctr;pos+=1;}}
function isValidNonNegativeSourceSizeValue(s){if(regexCssLengthWithUnits.test(s)&&(parseFloat(s)>=0)){return true;}
if(regexCssCalc.test(s)){return true;}
if((s==="0")||(s==="-0")||(s==="+0")){return true;}
return false;}
unparsedSizesList=parseComponentValues(strValue);unparsedSizesListLength=unparsedSizesList.length;for(i=0;i<unparsedSizesListLength;i++){unparsedSize=unparsedSizesList[i];lastComponentValue=unparsedSize[unparsedSize.length-1];if(isValidNonNegativeSourceSizeValue(lastComponentValue)){size=lastComponentValue;unparsedSize.pop();}else{continue;}
if(unparsedSize.length===0){return size;}
unparsedSize=unparsedSize.join(" ");if(!(pf.matchesMedia(unparsedSize))){continue;}
return size;}
return"100vw";}
pf.ns=("pf"+new Date().getTime()).substr(0,9);pf.supSrcset="srcset"in image;pf.supSizes="sizes"in image;pf.supPicture=!!window.HTMLPictureElement;if(pf.supSrcset&&pf.supPicture&&!pf.supSizes){(function(image2){image.srcset="data:,a";image2.src="data:,a";pf.supSrcset=image.complete===image2.complete;pf.supPicture=pf.supSrcset&&pf.supPicture;})(document.createElement("img"));}
if(pf.supSrcset&&!pf.supSizes){(function(){var width2="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==";var width1="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";var img=document.createElement("img");var test=function(){var width=img.width;if(width===2){pf.supSizes=true;}
alwaysCheckWDescriptor=pf.supSrcset&&!pf.supSizes;isSupportTestReady=true;setTimeout(picturefill);};img.onload=test;img.onerror=test;img.setAttribute("sizes","9px");img.srcset=width1+" 1w,"+width2+" 9w";img.src=width1;})();}else{isSupportTestReady=true;}
pf.selShort="picture>img,img[srcset]";pf.sel=pf.selShort;pf.cfg=cfg;pf.DPR=(DPR||1);pf.u=units;pf.types=types;pf.setSize=noop;pf.makeUrl=memoize(function(src){anchor.href=src;return anchor.href;});pf.qsa=function(context,sel){return("querySelector"in context)?context.querySelectorAll(sel):[];};pf.matchesMedia=function(){if(window.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches){pf.matchesMedia=function(media){return!media||(matchMedia(media).matches);};}else{pf.matchesMedia=pf.mMQ;}
return pf.matchesMedia.apply(this,arguments);};pf.mMQ=function(media){return media?evalCSS(media):true;};pf.calcLength=function(sourceSizeValue){var value=evalCSS(sourceSizeValue,true)||false;if(value<0){value=false;}
return value;};pf.supportsType=function(type){return(type)?types[type]:true;};pf.parseSize=memoize(function(sourceSizeStr){var match=(sourceSizeStr||"").match(regSize);return{media:match&&match[1],length:match&&match[2]};});pf.parseSet=function(set){if(!set.cands){set.cands=parseSrcset(set.srcset,set);}
return set.cands;};pf.getEmValue=function(){var body;if(!eminpx&&(body=document.body)){var div=document.createElement("div"),originalHTMLCSS=docElem.style.cssText,originalBodyCSS=body.style.cssText;div.style.cssText=baseStyle;docElem.style.cssText=fsCss;body.style.cssText=fsCss;body.appendChild(div);eminpx=div.offsetWidth;body.removeChild(div);eminpx=parseFloat(eminpx,10);docElem.style.cssText=originalHTMLCSS;body.style.cssText=originalBodyCSS;}
return eminpx||16;};pf.calcListLength=function(sourceSizeListStr){if(!(sourceSizeListStr in sizeLengthCache)||cfg.uT){var winningLength=pf.calcLength(parseSizes(sourceSizeListStr));sizeLengthCache[sourceSizeListStr]=!winningLength?units.width:winningLength;}
return sizeLengthCache[sourceSizeListStr];};pf.setRes=function(set){var candidates;if(set){candidates=pf.parseSet(set);for(var i=0,len=candidates.length;i<len;i++){setResolution(candidates[i],set.sizes);}}
return candidates;};pf.setRes.res=setResolution;pf.applySetCandidate=function(candidates,img){if(!candidates.length){return;}
var candidate,i,j,length,bestCandidate,curSrc,curCan,candidateSrc,abortCurSrc;var imageData=img[pf.ns];var dpr=pf.DPR;curSrc=imageData.curSrc||img[curSrcProp];curCan=imageData.curCan||setSrcToCur(img,curSrc,candidates[0].set);if(curCan&&curCan.set===candidates[0].set){abortCurSrc=(supportAbort&&!img.complete&&curCan.res-0.1>dpr);if(!abortCurSrc){curCan.cached=true;if(curCan.res>=dpr){bestCandidate=curCan;}}}
if(!bestCandidate){candidates.sort(ascendingSort);length=candidates.length;bestCandidate=candidates[length-1];for(i=0;i<length;i++){candidate=candidates[i];if(candidate.res>=dpr){j=i-1;if(candidates[j]&&(abortCurSrc||curSrc!==pf.makeUrl(candidate.url))&&chooseLowRes(candidates[j].res,candidate.res,dpr,candidates[j].cached)){bestCandidate=candidates[j];}else{bestCandidate=candidate;}
break;}}}
if(bestCandidate){candidateSrc=pf.makeUrl(bestCandidate.url);imageData.curSrc=candidateSrc;imageData.curCan=bestCandidate;if(candidateSrc!==curSrc){pf.setSrc(img,bestCandidate);}
pf.setSize(img);}};pf.setSrc=function(img,bestCandidate){var origWidth;img.src=bestCandidate.url;if(bestCandidate.set.type==="image/svg+xml"){origWidth=img.style.width;img.style.width=(img.offsetWidth+1)+"px";if(img.offsetWidth+1){img.style.width=origWidth;}}};pf.getSet=function(img){var i,set,supportsType;var match=false;var sets=img[pf.ns].sets;for(i=0;i<sets.length&&!match;i++){set=sets[i];if(!set.srcset||!pf.matchesMedia(set.media)||!(supportsType=pf.supportsType(set.type))){continue;}
if(supportsType==="pending"){set=supportsType;}
match=set;break;}
return match;};pf.parseSets=function(element,parent,options){var srcsetAttribute,imageSet,isWDescripor,srcsetParsed;var hasPicture=parent&&parent.nodeName.toUpperCase()==="PICTURE";var imageData=element[pf.ns];if(imageData.src===undefined||options.src){imageData.src=getImgAttr.call(element,"src");if(imageData.src){setImgAttr.call(element,srcAttr,imageData.src);}else{removeImgAttr.call(element,srcAttr);}}
if(imageData.srcset===undefined||options.srcset||!pf.supSrcset||element.srcset){srcsetAttribute=getImgAttr.call(element,"srcset");imageData.srcset=srcsetAttribute;srcsetParsed=true;}
imageData.sets=[];if(hasPicture){imageData.pic=true;getAllSourceElements(parent,imageData.sets);}
if(imageData.srcset){imageSet={srcset:imageData.srcset,sizes:getImgAttr.call(element,"sizes")};imageData.sets.push(imageSet);isWDescripor=(alwaysCheckWDescriptor||imageData.src)&&regWDesc.test(imageData.srcset||"");if(!isWDescripor&&imageData.src&&!getCandidateForSrc(imageData.src,imageSet)&&!imageSet.has1x){imageSet.srcset+=", "+imageData.src;imageSet.cands.push({url:imageData.src,d:1,set:imageSet});}}else if(imageData.src){imageData.sets.push({srcset:imageData.src,sizes:null});}
imageData.curCan=null;imageData.curSrc=undefined;imageData.supported=!(hasPicture||(imageSet&&!pf.supSrcset)||(isWDescripor&&!pf.supSizes));if(srcsetParsed&&pf.supSrcset&&!imageData.supported){if(srcsetAttribute){setImgAttr.call(element,srcsetAttr,srcsetAttribute);element.srcset="";}else{removeImgAttr.call(element,srcsetAttr);}}
if(imageData.supported&&!imageData.srcset&&((!imageData.src&&element.src)||element.src!==pf.makeUrl(imageData.src))){if(imageData.src===null){element.removeAttribute("src");}else{element.src=imageData.src;}}
imageData.parsed=true;};pf.fillImg=function(element,options){var imageData;var extreme=options.reselect||options.reevaluate;if(!element[pf.ns]){element[pf.ns]={};}
imageData=element[pf.ns];if(!extreme&&imageData.evaled===evalId){return;}
if(!imageData.parsed||options.reevaluate){pf.parseSets(element,element.parentNode,options);}
if(!imageData.supported){applyBestCandidate(element);}else{imageData.evaled=evalId;}};pf.setupRun=function(){if(!alreadyRun||isVwDirty||(DPR!==window.devicePixelRatio)){updateMetrics();}};if(pf.supPicture){picturefill=noop;pf.fillImg=noop;}else{(function(){var isDomReady;var regReady=window.attachEvent?/d$|^c/:/d$|^c|^i/;var run=function(){var readyState=document.readyState||"";timerId=setTimeout(run,readyState==="loading"?200:999);if(document.body){pf.fillImgs();isDomReady=isDomReady||regReady.test(readyState);if(isDomReady){clearTimeout(timerId);}}};var timerId=setTimeout(run,document.body?9:99);var debounce=function(func,wait){var timeout,timestamp;var later=function(){var last=(new Date())-timestamp;if(last<wait){timeout=setTimeout(later,wait-last);}else{timeout=null;func();}};return function(){timestamp=new Date();if(!timeout){timeout=setTimeout(later,wait);}};};var lastClientWidth=docElem.clientHeight;var onResize=function(){isVwDirty=Math.max(window.innerWidth||0,docElem.clientWidth)!==units.width||docElem.clientHeight!==lastClientWidth;lastClientWidth=docElem.clientHeight;if(isVwDirty){pf.fillImgs();}};on(window,"resize",debounce(onResize,99));on(document,"readystatechange",run);})();}
pf.picturefill=picturefill;pf.fillImgs=picturefill;pf.teardownRun=noop;picturefill._=pf;window.picturefillCFG={pf:pf,push:function(args){var name=args.shift();if(typeof pf[name]==="function"){pf[name].apply(pf,args);}else{cfg[name]=args[0];if(alreadyRun){pf.fillImgs({reselect:true});}}}};while(setOptions&&setOptions.length){window.picturefillCFG.push(setOptions.shift());}
window.picturefill=picturefill;if(typeof module==="object"&&typeof module.exports==="object"){module.exports=picturefill;}else if(typeof define==="function"&&define.amd){define("picturefill",function(){return picturefill;});}
if(!pf.supPicture){types["image/webp"]=detectTypeSupport("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==");}})(window,document);;
(()=>{const header=document.querySelector('.header-title');const urlUtils=new HappycowUrlUtils();const gallery=new HappycowGallery();const reviewGallery=new HappycowGallery();const reviews=new HappycowReviews();const limit=18;const sessionStorage=window.sessionStorage;let currentLimit=18;let currentSorting='';reviews.init();HappycowAnalytics.gtagSet('content_group','listing_page');HappycowListingCommon.isOpen();currentLimit=urlUtils.getUrlParameter('limit')||limit;currentSorting=urlUtils.getUrlParameter('sortby')||'';getVenueInfo();if(HappycowEventsCommon.getUserDevice().toLowerCase()!=='desktop'){HappycowNoticeBar.setBar({text:`<span class="block py-1 mr-3">NEW! Save places you love to your own map to find food faster every time!</span>`,link:'https://bit.ly/FavoritesWebBanner',linkTitle:`Take me to <br class="sm:hidden"> the app.`,cookieName:'listingNoticeBar',});}
gallery.initialize('#listing-images',{miniGallery:true,galleryTypeParam:'0',});reviewGallery.initialize('.listing-review-images',{galleryTypeParam:'1',});getLatestBlogPosts();addOnEventListener('click','.entry-info',(e)=>{e.preventDefault();const addedBy=e.target.dataset.user;const added=e.target.dataset.added;const updated=e.target.dataset.updated;const message=`<p>Last updated: ${updated}</p><p>Added: ${added}</p><p>Added by: ${addedBy}</p>`;HappycowAlert.alert({title:'Venue Entry Info',message:message,});});addLiveEventListener('click','.mobile-app-download',function(e){HappycowAnalytics.gtagEvent('download_app_select',{source:'listing_details',});});addLiveEventListener('click','.venue-hours',(e)=>{e.preventDefault();HappycowAnalytics.gtagEvent('listing_opening_hours_select');HappycowAlert.alert({title:'',message:document.querySelector('div.hours-modal').innerHTML,buttons:false,});});addLiveEventListener('click','.owner-btn',(e)=>{e.preventDefault();const id=header.dataset.id;get(`/ajax/venues/${id}/owner/info`,{target:false}).then((result)=>{if(result.success){HappycowAlert.alert({title:'Business Owner Information',message:result.output,buttons:false,});return;}
throw new Error("Looks like there's a problem, please try again later or contact us");}).catch((error)=>{HappycowToastr.error('Something went wrong. Please try again later or contact us.');});});addOnEventListener('change','#sort',(e)=>{e.preventDefault();currentSorting=e.target.selectedOptions[0].value;const params={};params.sortby=currentSorting;params.limit=currentLimit;urlUtils.setHistory(params,'sorting','Happycow Listing');window.location.reload();});addOnEventListener('change','.limit',(e)=>{e.preventDefault();currentLimit=e.target.value;const params={};params.limit=currentLimit;if(currentSorting.length>0){params.sortby=currentSorting;}
urlUtils.setHistory(params,'limit','Happycow Listing');window.location.reload();});HappycowAnalytics.gtagEventLink('a[data-analytics="default-website"]','listing_website_select');HappycowAnalytics.gtagEventLink('a[data-analytics="facebook-website"]','listing_facebook_select');HappycowAnalytics.gtagEventLink('a[data-analytics="instagram-website"]','listing_instagram_select');HappycowAnalytics.gtagEventLink('a[data-analytics="listing-more-images"]','listing_gallery_select');HappycowAnalytics.gtagEventLink('a[data-analytics="listing-map"]','listing_directions_select');HappycowAnalytics.gtagEventLink('a[data-analytics="listing-phone"]','listing_call_select');HappycowAnalytics.gtagEventLink('a[data-analytics="nearby-listings-venue"]','listing_details',{source:'listing_nearby',});HappycowAnalytics.gtagEventLink('a[data-analytics="user-profile"]','profile_details',{source:'listing_details',});addLiveEventListener('click','.btn-login',(e)=>{HappycowAnalytics.gtagEvent('auth_modal',{source:'listing_details',trigger:'nav_select',});});addLiveEventListener('click','#listing-images .venue-list-images',()=>{HappycowAnalytics.gtagEvent('listing_image_carousel',{trigger:'listing_image',});});addLiveEventListener('click','.listing-review-images .venue-list-images',()=>{HappycowAnalytics.gtagEvent('listing_image_carousel',{trigger:'review_image',});});const userReviews=document.querySelector('.reviews');window.addEventListener('scroll',debounce(()=>{if(userReviews&&!sessionStorage.getItem('reviewPassed')&&window.scrollY>userReviews.getBoundingClientRect().top+window.scrollY-110){sessionStorage.setItem('reviewPassed',true);HappycowAnalytics.gtagEvent('listing_reviews_scroll');}},200));gallery.loadImageFromHash();reviewGallery.loadImageFromHash();const listingContainer=document.querySelector('.listing-container');if(listingContainer){const pageType=listingContainer.dataset.type;if(pageType==='listing-user-review'){if(window.location.hash.length==0){window.location.hash='#reviews';}}}
function getVenueInfo(){if(!header)return;const id=header.dataset.id;get(`/ajax/views/venue/${id}/info`).then((result)=>{if(!result.data){return;}
if(result.data.claimed){appendContent('.owner-info-container',result.data.claimed);}
if(result.data.announcement){prependContent('.venue-description',result.data.announcement);}
if(result.data.holiday&&result.data.holiday.length>0){if(!header.dataset.closed){header.innerHTML+=' - temporarily closed';appendContent('.venue-description p[itemprop="description"]',' '+result.data.holiday);document.querySelector('.hours-summary').classList.add('hidden');}}});}
function getLatestBlogPosts(){get('/ajax/views/latest-blog-sidebar',{target:false}).then((result)=>{if(result.success){emptyElement('.latest-blog-posts');appendContent('.latest-blog-posts',result.data);HappycowCommon.setObserver('.latest-blog-posts .lazy-js-image');}});}})();;
(()=>{const header=document.querySelector('.header-title');let id=false;if(header){id=header.dataset.id;isFavorite(id);countFavorites(id);}
const savedTripTemplate=`
        <div class="flex items-center justify-center flex-wrap space-x-2 md:space-x-3">
            <div class="flex items-center space-x-2 md:space-x-3 mt-2 mb-2 sm:mt-0 sm:mb-0">
                <svg class="h-4 w-4 md:h-5 md:w-5 text-primary-500 flex-0-0-auto" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 41.869 41.869" stroke="currentColor" fill="currentColor">
                    <g>
                        <path d="M40.522,0.972c-1.294-1.296-3.396-1.296-4.693,0L27.936,9.12L10.375,3.355l-5.718,5.72l16.149,7.409L10.558,27.069c-0.253,0.252-0.486,0.505-0.692,0.756l-6.621-3.039l-2.872,2.871l7.626,4.714l1.941,1.942l5.062,7.556l2.662-2.663l-3.691-7.896c0.157-0.107,0.31-0.232,0.451-0.374l10.775-10.433l0.169,0.169l8.424,16.711l5.303-5.306l-6.352-18.779l-0.05-0.051l7.829-7.582C41.82,4.371,41.82,2.268,40.522,0.972z"/>
                    </g>
                </svg>
                <span>
                    Saved to your Trip.
                </span>
            </div>
            <a href="/members/profile/manage/trips" target="_blank" class="bg-primary-500 text-white rounded-full px-4 py-2.5 transition-all duration-200 ease-in-out hover:bg-primary-300 md:px-6 py-3">Manage</a>
        </div>
    `;const addedFavoritesTemplate=`
        <div class="flex items-center justify-center flex-wrap space-x-2 md:space-x-4">
            <div class="flex items-center space-x-2 md:space-x-3 mt-2 mb-2 sm:mt-0 sm:mb-0">
                <svg class="h-5 h-5 md:h-[1.375rem] md:w-[1.375rem] text-primary-500 flex-0-0-auto" viewBox="0 0 16 22" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill="currentColor" d="M1.39999 1.09998H15.15V20.35L8.27499 13.475L1.39999 20.35V1.09998Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>
                    Added to your favorites.
                </span>
            </div>
            <a href="/members/profile/manage/favorites" target="_blank" class="bg-primary-500 text-white rounded-full px-6 py-2.5 transition-all duration-200 ease-in-out hover:bg-primary-300 md:px-12 py-3">View</a>
        </div>
    `;const removedFavoritesTemplate=`
        <svg class="h-[1.625rem] h-[1.625rem] md:h-7 md:w-7 text-primary-500 -mr-0.25 md:-mr-1" viewBox="0 0 28 28" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill="none" d="M7 4H20.75V23.25L13.875 16.375L7 23.25V4Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line fill="currentColor" x1="0.993764" y1="17.2862" x2="26.1938" y2="6.08619" stroke-width="2"/>
        </svg>
        <span>
            Removed from your favorites.
        </span>
    `;addLiveEventListener('click','.favorite-listing-button',(e)=>{e.preventDefault();HappycowCommon.authCheck().then((data)=>{if(!data){HappycowModal.show('#authentication-modal','Please login or register to add listing to your favorites',false);HappycowAnalytics.gtagEventCheck('#web-listing','auth_modal',{source:'listing_details',trigger:'engagement',});return;}
const favoriteButton=e.target.closest('.favorite-listing-button');saveFavorite(favoriteButton);});});function saveFavorite(favoriteButton){const formData=new FormData();formData.append(csrf.name,csrf.value);const venuePrettyUrl=favoriteButton.dataset.url;const isFavoriteBtn=favoriteButton.classList.contains('active');post(`/ajax/reviews/${venuePrettyUrl}/favorite/save`,formData).then((d)=>{if(d.success){alertFavorite(isFavoriteBtn);favoriteButton.classList.toggle('active');if(id)countFavorites(id);if(!isFavoriteBtn){favoriteButton.querySelector('svg path').setAttribute('fill','#7c4ec4');isAmbassadorEvent(d.isAmbassador||false);HappycowAnalytics.gtagEventCheck('#web-listing','favorite_add',{source:'listing_details',});return;}
favoriteButton.querySelector('svg path').setAttribute('fill','none');isAmbassadorEvent(d.isAmbassador||false);HappycowAnalytics.gtagEventCheck('#web-listing','favorite_remove',{source:'listing_details',});return;}
HappycowToastr.error(d.message||'Something went wrong. Please try again later or contact us.');}).catch((e)=>{HappycowToastr.error('Something went wrong. Please try again later or contact us.');});}
function isAmbassadorEvent(isAmbassador){const mainContent=document.querySelector('.main-content');if(mainContent){dispatchCustomEvent(mainContent,'added.hc.favorite',isAmbassador);}}
function alertFavorite(isFavoriteStatus){const tmpl=isFavoriteStatus?removedFavoritesTemplate:addedFavoritesTemplate;HappycowToastr.basic('',tmpl);}
addLiveEventListener('click','.save-listing-button',(e)=>{e.preventDefault();const saveListingButton=e.target.closest('.save-listing-button');HappycowCommon.authCheck().then((data)=>{if(!data){HappycowModal.show('#authentication-modal','Please login or register to add a listing to your trip',false);if(document.querySelector('#web-listing')){HappycowAnalytics.gtagEvent('auth_modal',{source:'listing_details',trigger:'engagement',});}
return;}
get('/ajax/trip/list').then((result)=>{if(result.success){if(result.newTrip){createNewTrip(saveListingButton);return;}
alertSaveListing(result.output).then(function(value){if(value=='newTrip'){createNewTrip(saveListingButton);}else if(value=='save'){const selectedTrip=document.querySelector('#list-saved-trips').selectedOptions[0].value;saveListingTrip(saveListingButton,selectedTrip);}});}}).catch((error)=>{HappycowToastr.error('Something went wrong! Please try again.');});});});function alertSaveListing(message){return HappycowAlert.alert({title:'Select Trip',message:message,buttons:{fullWidth:true,cancel:false,extra:{text:'Create New Trip',closeModal:false,value:'newTrip',},confirm:{text:'Save',closeModal:false,value:'save',},},});}
function isFavorite(isFavoriteId){if(!isFavoriteId){return;}
get(`/ajax/venues/favorite/${isFavoriteId}`).then((result)=>{if(result.results){document.querySelectorAll('.favorite-listing-button').forEach((item)=>{item.classList.add('active');item.querySelector('svg path').setAttribute('fill','#7c4ec4');});}});}
function countFavorites(countFavoritesId){if(!countFavoritesId){return;}
get(`/ajax/venues/favorite/${countFavoritesId}/count`).then((result)=>{if(result.results){const badge=document.querySelector('.favorite-listing-button .badge')||document.querySelector('.favorite-badge');if(!badge)return;badge.textContent=result.results;badge.classList.remove('hidden');}});}
function createNewTrip(saveListingButton){HappycowCommon.authCheck().then((data)=>{if(!data){HappycowModal.show('#authentication-modal','Please login or register to create a new trip',false);return;}
const message=`<div class="w-full mx-auto"><input type="text" class="appearance-none border border-gray-300 rounded w-full py-3 px-3 text-gray-800 placeholder-base-color leading-tight focus:outline-none focus:ring focus:border-input focus:shadow-input" id="new-trip" name="new-trip" placeholder="Trip name" size="50" value="" autocomplete="off"></div>`;HappycowAlert.alert({title:'Create New Trip',message:message,buttons:{fullWidth:true,cancel:false,confirm:{text:'Save',closeModal:false,},},}).then((value)=>{let inputValue=document.querySelector('.modal-alert input');if(inputValue){inputValue=validateInput(inputValue.value);}
if(!inputValue){return false;}
saveListingTrip(saveListingButton,inputValue);});});}
function validateInput(inputValue){if(!inputValue&&inputValue===false)return false;if(inputValue.length>80){HappycowAlert.error('Error','Trip name too long. 80 characters max.');return false;}
if(inputValue.length===0){HappycowAlert.error('Error','Trip name cannot be empty');return false;}
return inputValue.trim();}
function saveListingTrip(saveListingButton,list){const formData=new FormData();formData.append(csrf.name,csrf.value);formData.append('list',list);const venuePrettyUrl=saveListingButton.dataset.url;post(`/ajax/reviews/${venuePrettyUrl}/list/save`,formData).then((d)=>{if(d.success){HappycowToastr.basic('',savedTripTemplate);HappycowAlert.terminate();HappycowAnalytics.gtagEventCheck('#web-listing','trip_add_listing',{source:'listing_details',});return;}
HappycowToastr.error(d.message||'Something went wrong. Please try again later or contact us.');}).catch((e)=>{HappycowToastr.error('Something went wrong. Please try again later or contact us.');});}})();;